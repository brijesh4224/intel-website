<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CUDA, SYCL & oneAPI: A Functional Test Walkthrough</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href=" https://fonts.cdnfonts.com/css/intel-clear " rel="stylesheet">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/yatri.css">
    <link rel="stylesheet" href="../css/rushita.css">
    <link rel="stylesheet" href="../css/rushita_automotive.css">

    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <style>
        * {
            font-family: 'Intel Clear', sans-serif;
        }

        .dk_new_options_table {
            border: none !important;
            justify-content: center !important;
            text-align: center !important;
        }

        .dk_new_options_table thead tr td {
            margin-left: 0;
            max-width: fit-content;
            white-space: normal;
            overflow: auto;
            background: #fff;
            padding: 1rem;
            text-align: left;
            border-left: .125rem solid #e2e2e2;
            font-weight: 700 !important;
        }

        .dk_new_options_table thead tr:nth-child(even) td {
            background-color: #f7f7f7;
        }

        .mv_intel_amx h2 {
            font-weight: 300;
        }

        .mv_intel_amx {
            font-size: 1.25rem;
        }

        .mv_intel_amx_bg_color {
            background-color: #0068B5;
        }

        .mv_intel_amx_content {
            padding-right: 200px;
        }

        .mv_intel_amx_item {
            align-content: center;
        }

        .mv_intel_amx {
            color: #fff;
            padding: 1rem;
        }

        .mv_intel_amx h3 {
            font-weight: 300;
        }

        .mv_intel_amx p {
            margin-top: 1.5rem;
            margin-bottom: 0rem;
        }

        .mv_intel_amx_image {
            padding: 1rem;
        }

        .mv_intel_amx_image img {
            width: 100%;
            /* height: 199px; */
        }

        .mv_intel_amx_heading_text {
            font-size: 1.2rem;
            line-height: 1.15;
        }

        .VK_sidebar_active_link {
            color: #262626;
            font-weight: 700;
        }

        .VK_sidebar_active_link:hover {
            color: #262626;
        }

        .VK_print_email_font span {
            font-size: 1.375rem;
        }

        .VK_side_bar_postion_stickey {
            position: sticky;
            top: 0px;
            z-index: 3;
            background-color: #fff;
        }

        .VK_side_heading {
            font-size: 26px;
            font-weight: 400;
        }

        .VK_sidebar_dropdown P {
            margin-left: .313rem !important;
            margin-bottom: .313rem !important;
        }

        .VK_sidebar_dropdown details {
            margin-left: .313rem !important;
            margin-bottom: .313rem !important;
        }

        code {
            color: #000 !important;
            background-color: #E6E6E6;
        }

        pre {
            white-space: pre-line !important;
        }
    </style>
</head>

<body>
    <div id="navbar"></div>

    <section class="m_ai_tdrop">
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Developers
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Zone.html">Overview</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Control-flow-Enforcement_Technology.html">Topics
                        & Technologies</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Development-Tools.html">Tools</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Hardware-Platforms.html">Hardware
                        Platforms</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Resource-Documentation-Center.html">Resources &
                        Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Learn.html">Learn</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Communities-and-Events.html">Community & Events</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Programs.html">Developer Programs</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Get-Help.html">Get
                        Help</a></li>
            </ul>
        </div>


        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tools
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="../Product/B20_developer_catelog.html">Software
                        Catalog</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B17_oneapi.html">oneAPI</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Tiber™Edge-Platform.html">Intel® Tiber™ Edge
                        Platform</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B10_intel_Quarts.html">FPGA</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_technology_sdk.html">Intel®
                        Active Management Technology SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_intel_adviser.html">Intel®
                        Advisor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® AI Reference Models</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Collaboration-Suite-for-WebRTC.html">Intel®
                        Collaboration Suite for WebRTC SDK</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B1_19_Intel_AICloud.html">Intel® Tiber™
                        AI Cloud</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-Python.html">Intel® Distribution
                        for Python*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-GDB.html">Intel® Distribution for
                        GDB*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® DPC++ Compatibility Tool</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Dynamic Application Loader</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Topics_viewall_Cloud-Insider-Program_AI-Frameworks-and-Tools.html">Frameworks</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Embree</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_ai_scikit.html">Intel® Extension
                        for Scikit-learn*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Fortran-Compiler.html">Intel® Fortran Compiler</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Graphics Performance Analyzers</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-HE-Toolkit.html">Intel® Homomorphic Encryption
                        Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-In-Band-Manageability.html">Intel® In-Band
                        Manageability</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Cryptography-Primitives-Library.html">Intel®
                        Integrated Performance Primitives</a></li>
                <li><a class="dropdown-item m_dropActive" href="../rushita_Solutions/">Intel® Integrated Simulation
                        Infrastructure with
                        Modeling</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Instruction-Set-Architecture(ISA)Extensions.html">Instruction
                        Set Architecture (ISA) Extensions</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Intelligent-Storage-Acceleration-Library.html">Intel®
                        Intelligent Storage Acceleration Library
                        (Intel® ISA-L)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Modin*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® MPI Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Neural Compressor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenCL™ Runtime</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Image Denoise</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Path Guiding Library (Intel® Open
                        PGL)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Pin</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Platform Analysis Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Software</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Applications</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OpenSWR</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenVINO™ Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Volume Kernel Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Optimization for XGBoost*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay for Hydra*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay Studio</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">PyTorch* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">TensorFlow* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Rendering Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Smart Edge Open</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Guard Extensions</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Secure Device Onboard</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Development Emulator</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Trust Domain Extensions (Intel® TDX)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Quantum SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Query Processing Library (Intel® QPL)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Video Processing Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® VTune™ Profiler</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Resellers</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                oneAPI
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Overview</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Data Parallel C++/SYCL*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Toolkits</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Tech Articles & How-Tos</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Components</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Code Samples</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Training</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Support</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tech Articles & How-Tos
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">News Updates</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Webinars</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div class="m_ai_httl">CUDA, SYCL & oneAPI: A Functional Test Walkthrough
        </div>
    </section>
    <section class="k_bgblue">
        <div class="k_container11">
            <div class="row text-white py-4">
                <h3 class="fw-light">CUDA*, SYCL*, Codeplay*, and oneAPI — Accelerators for Everyone</h3>
                <p>CUDA and SYCL — A functional test walk through</p>
            </div>
        </div>
    </section>
    <section class="k_space k_spacenone">
        <div class="k_container11">
            <div class="row  g-3">
                <div class="float-end k_bignone" style="padding-left:70%;">
                    <div>
                        <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                        <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-12">
                    <div class="VK_sticky_side_bar VK_side_bar_postion_stickey">
                        <div>
                            <div class="VK_sidebar_dropdown">
                                <ul class="k_listnone k_menu ">
                                    <li class="k_text"><a href="#section1">Migrating CUDA to SYCL</a></li>
                                    <li class="k_text"><a href="#section2">Testing SYCL on a variety of hardware</a>
                                    </li>
                                    <li class="k_text"><a href="#section3">SYCL on CPU</a></li>
                                    <li class="k_text"><a href="#section4">SYCL on Nvidia GPU</a></li>
                                    <li class="k_text"><a href="#section5">Compiling and Running for CUDA</a></li>
                                    <li class="k_text"><a href="#section6">Conclusion</a></li>
                                    <li class="k_text"><a href="#section7" class="k_submenu-toggle">Discover More
                                            Related Content</a>
                                        <ul class="k_listnone k_submenu">
                                            <li class="k_text"><a href="#section8"></a>Blogs</a></li>
                                            <li class="k_text"><a href="#section9"></a>On-Demand Webinars</a></li>
                                            <li class="k_text"><a href="#section10"></a>Get the Software</a></li>
                                        </ul>
                                    </li>

                                </ul>
                            </div>
                        </div>
                    </div>
                    <div>

                        <div class="p-3" style="background-color: #F7F7F7;">
                            <p><b>
                                    Get the Latest on All Things CODE</b></p>
                            <p class="text-center k_btnget py-2 k_under k_btn100 my-2 kcokbtn1024" style="width: 80px;">
                                <a href="#" class="text-white">Sign Up</a>
                            </p>
                        </div>
                        <div class="d-flex gap-4 mt-4">
                            <div>
                                <img src="../img/rushita_img/tony.jpg" alt="" width="100px"
                                    style="border-radius: 100%;">
                            </div>
                            <div>
                                <p><b>Tony Mongkolsmai</b></p>
                                <p>Technology Evangelist, Intel Corporation</p>
                                <p class="k_plink1"><a href="#">Twitter*</a></p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-7 col-sm-12  k_16smpx k_width75">
                    <div class="float-end mx-3 k_smnone">
                        <div>
                            <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                            <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                        </div>
                    </div>
                    <div class=" k_smpaddnone k_smpaddnone1 pt-5">
                        <p class="k_plink1 k_intext1blue1">There is an ever-growing number of accelerators in the world.
                            This raises the question of how various ecosystems will evolve to allow programmers to
                            leverage these accelerators. At higher levels of abstraction, domain-specific layers like
                            TensorFlow* and PyTorch* provide great abstractions to the underlying hardware. However, for
                            developers who maintain code that talks to the hardware without such an abstraction the
                            challenge still exists. One solution that is supported on multiple underlying hardware
                            architectures is C++ with SYCL*. Here is the description of SYCL from the <a href="#">Kronos
                                Group&nbsp;webpage</a>:</p>
                        <div class="col-xs-12 m-3">
                            <div class="d-flex">
                                <div>
                                    <i><i class="fa-solid fa-quote-left k_lefticon"
                                            style="font-size: 100px !important;"></i></i>
                                </div>
                                <div class="mx-3">
                                    <p><em>SYCL (pronounced ‘sickle’) is a royalty-free, cross-platform abstraction
                                            layer that enables code for heterogeneous processors to be written using
                                            standard ISO C++ with the host and kernel code for an application contained
                                            in the same source file.</em></p>
                                </div>
                            </div>
                        </div>
                        <p>This sounds pretty good assuming you:</p>
                        <ol>
                            <li>are comfortable learning a C++ like language</li>
                            <li>want the flexibility of not being tied to your underlying hardware vendor</li>
                            <li>you are starting your code from scratch</li>
                        </ol>
                        <p>Since people who program at this level of the stack are already using C++, it is safe to say
                            that the first assumption is reasonable and if you’re still reading, I’ll assume number two
                            as well. However, the third point is very often not the case. For the rest of this story, we
                            will discuss how to take a CUDA* code, migrate it to SYCL and then run it on multiple types
                            of hardware, including an Nvidia* GPU.</p>
                        <p>To test how viable this is, we’ll be using a series of freely available tools including
                            SYCLomatic, Intel® oneAPI Base Toolkit, and the Codeplay oneAPI for CUDA* compiler.</p>
                        <p class="k_plink1 k_intext1blue1">(See the&nbsp;<a
                                href="../rushita_Solutions/k_solutions_DPC-Compatibility-Tool-Release-Notes.html">Intel®
                                DPC++ Compatibility Tool Release Notes</a>&nbsp;and&nbsp;<a
                                href="#">oneAPI
                                for CUDA Getting Started Guide</a> for information on supported CUDA versions for these
                            tools.)</p>
                        <p>For reference, I’m using my personal Alder Lake system—Intel® Core™ i9 12900KF Alienware
                            R13—with a 3080Ti GPU. My software stack is Windows* 11 Pro, and I’m developing in Ubuntu*
                            20.04 leveraging the Windows Subsystem for Linux* (WSL).</p>
                        <h2 class="fw-light mt-5">Migrating CUDA to SYCL</h2>
                        <p class="k_plink1 k_intext1blue1">CUDA is often used to program for general-purpose computing on GPUs. The drawback is it only
                            runs on Nvidia GPUs. To help migrate from CUDA to SYCL, we will be leveraging the&nbsp;<a
                                href="../rushita_Solutions/k_solutions_Intel-DPC++Compatibility-Tool.html">Intel®
                                DPC++ Compatibility Tool</a>. (Note that Intel open-sourced the technology behind this
                            tool to further advance the migration capabilities for producing more SYCL-based
                            applications into the&nbsp;<a
                                href="#">SYCLomatic</a>&nbsp;project.)</p>
                        <p>There is already a nice write-up that is posted on both Stack Overflow and Intel® Developer
                            Zone that walks through taking the jacobiCudaGraphs implementation from the cuda-samples
                            GitHub repository and migrating the code, so rather than retype I’ll just link it here.</p>
                        <div style="border: 1px solid #CCCCCC;">
                            <img src="../img/rushita_img/sycl1.jpg" alt="" width="100%">
                            <div class="p-3">
                                <p class="fs-5"><b><a href="#"
                                            style="color: black; text-decoration: none;">oneapi-src/oneAPI-samples:
                                            Samples for Intel® oneAPI Toolkits</a></b></p>
                                <p>Samples for Intel® oneAPI Toolkits. Contribute to oneapi-src/oneAPI-samples
                                    development by creating an account on GitHub.</p>
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <i class="fa-brands fa-github"></i><span class="twt px-2"
                                            style="color: grey;">GitHub</span>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-circle-exclamation" style="color: grey;"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p class="k_plink1 k_intext1blue1">Note that if you just want to see how Codeplay’s oneAPI for CUDA compiler works for SYCL
                            code, you can skip this tutorial and see the final code in the oneAPI-Samples repository on
                            <a
                                href="#">GitHub</a>.
                        </p>

                        <h2 class="fw-light mt-5">Testing SYCL on a variety of hardware</h2>
                        <p>Once you have migrated to SYCL code, you should be able to run it on a variety of hardware.
                            Let’s put it to the test, shall we? To make it easier to do this walkthrough, you can check
                            out the oneAPI-samples directory which includes the migrated code already:</p>
                        <div style="border: 1px solid #CCCCCC;">
                            <img src="../img/rushita_img/oneapi1.jpg" alt="" width="100%">
                            <div class="p-3">
                                <p class="fs-5"><b><a href="#"
                                            style="color: black; text-decoration: none;">oneapi-src/oneAPI-samples:
                                            Samples for Intel® oneAPI Toolkits</a></b></p>
                                <p>Samples for Intel® oneAPI Toolkits. Contribute to oneapi-src/oneAPI-samples
                                    development by creating an account on GitHub.</p>
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <i class="fa-brands fa-github"></i><span class="twt px-2"
                                            style="color: grey;">GitHub</span>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-circle-exclamation" style="color: grey;"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p>One minor note: In the oneAPI samples, the jacobi.h has an NROWS value of 1024 instead of
                            512. If you are using the pre-canned sample, you may want to manually update that for
                            comparison purposes.</p>
                        <p class="k_plink1 k_intext1blue1">Here is the output when I follow the&nbsp;<a
                                href="#">cuda-sample</a>&nbsp;instructions
                            to build and run the code:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/sycl2.png" alt="" width="100%">
                        </div>


                        <h2 class="fw-light mt-5">SYCL on CPU</h2>
                        <p>Intel provides a SYCL-based compiler in the oneAPI Base Toolkit, which is available here:</p>
                        <div style="border: 1px solid #CCCCCC;">
                            <img src="../img/rushita_img/sycl3.jpg" alt="" width="100%">
                            <div class="p-3">
                                <p class="fs-5"><b><a href="#" style="color: black; text-decoration: none;">Get the
                                            Intel® oneAPI Base Toolkit</a></b></p>
                                <p>Select your operating system and distribution channel, and then download your
                                    customized installation of this toolkit.</p>
                                <div class="d-flex justify-content-between">
                                    <div>
                                        <i class="fa-brands fa-github"></i><span class="twt px-2" style="color: grey;">
                                            Intel/Feb 26</span>
                                    </div>
                                    <div>
                                        <i class="fa-solid fa-circle-exclamation" style="color: grey;"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p>Because I’m using Ubuntu, I just followed the instructions to do an APT-based installation.
                            Make sure to add the compiler paths to your workspace by running:</p>
                        <div class="p-3" style="border: 1px solid #CCCCCC; background-color: #F8F8F8;">
                            <div class="float-end p-3">
                                <i class="fa-solid fa-copy fs-4" style="color: #0068B5;"></i>
                            </div>
                            <p>
                            <div class="toolbar">
                                <div class="toolbar-item"><i class="fa fa-docs"></i></div>
                            </div>> source /opt/intel/oneapi/setvars.sh<br>
                            </p>
                        </div>
                        <p>I then went to the
                            oneAPI-samples/DirectProgramming/DPC++/DenseLinearAlgebra/jacobi_iterative/sycl_dpct_migrated/src
                            directory and compiled the code using the Intel DPC++ SYCL compiler:</p>
                        <div class="p-3" style="border: 1px solid #CCCCCC; background-color: #F8F8F8;">
                            <div class="float-end p-3">
                                <i class="fa-solid fa-copy fs-4" style="color: #0068B5;"></i>
                            </div>
                            <p>
                            <div class="toolbar">
                                <div class="toolbar-item"><i class="fa fa-docs"></i></div>
                            </div>> dpcpp -o jacobiSyclCPU main.cpp jacobi.cpp -I ../Common/<br>
                            </p>
                        </div>
                        <p>Note that the include of ../Common is from the SYCLomatic workflow, which creates some helper
                            files to enable my migration from CUDA to SYCL. My executable file in this case is
                            jacobiSyclCPU, so let’s give that a run:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/sycl4.png" alt="" width="100%">
                        </div>

                        <p>Looking at the output there are a couple things to consider:</p>
                        <ol>
                            <li>The SYCL version of the code is compiled with the Intel® oneAPI DPC++/C++ Compiler and
                                the cuda-sample code is compiled with the GNU compiler.</li>
                            <li>The migrated SYCL code, which is originally parallelized for the GPU, is now running on
                                the CPU and is slower than the serialized version of the code. This is due to memory
                                buffer setup and synchronization that is not required for the serialized version.</li>
                            <li>The text “GPU ***” is incorrect because I just migrated the code and didn’t change the
                                text to reflect that I’m targeting a CPU in this case.</li>
                        </ol>

                        <h2 class="fw-light mt-5">SYCL on Nvidia GPU</h2>
                        <p>Now that we’ve seen that we can run SYCL code on the CPU, let’s do something more
                            interesting: Take the migrated code and see if we actually can run it on my GPU.</p>
                        <p class="k_plink1 k_intext1blue1">The first step was to install the&nbsp;<a
                                href="#">oneAPI for CUDA
                                compiler</a>&nbsp;from Codeplay. I followed their instructions to install and build the
                            compiler, inlined here for your convenience:</p>
                        <div class="p-2" style="border: 1px solid #CCCCCC; background-color: #F8F8F8;">
                            <div class="float-end ">
                                <i class="fa-solid fa-copy fs-4" style="color: #0068B5;"></i>
                            </div>
                            <p class="m-0">
                            <pre class=""><div class="toolbar"><div class="toolbar-item"><i class="fa fa-docs"></i></div></div>git clone https://github.com/intel/llvm.git -b sycl
                                cd llvm
                                python ./buildbot/configure.py --cuda -t release --cmake-gen “Unix Makefiles”
                                cd build
                                make sycl-toolchain -j `nproc`
                                make install</pre>
                            </p>
                        </div>
                        <p class="p-3 my-2 k_plink1 k_intext1blue1" style="text-align:center; background-color: #E6E6E6;"><strong>WSL2
                                Tip</strong><br>
                            A quick aside, while doing this installation I noticed it was running pretty slowly, a
                            little bit of asking around and the issue was that I was running my compilation in WSL
                            against a Windows filesystem instead of the WSL ext4 filesystem. Moving to the local
                            filesystem made it exponentially faster, so good tip. For more details check out some WSL
                            filesystem benchmarks <a
                                href="#">here</a>. It’s a bit older
                            but still seems to be relevant.</p>

                        <h2 class="fw-light mt-5">Compiling and Running for CUDA</h2>
                        <p>With my compiler installed, I am ready to compile to run on an Nvidia GPU. Due to how the
                            migrated code was generated, I need to have include files from both the oneAPI DPC++/C++
                            Compiler and Codeplay’s compiler in my path:</p>
                            <div class="p-2" style="border: 1px solid #CCCCCC; background-color: #F8F8F8;">
                                <div class="float-end ">
                                    <i class="fa-solid fa-copy fs-4" style="color: #0068B5;"></i>
                                </div>
                                <p class="m-0">
                                    <pre><div class="toolbar"><div class="toolbar-item"><i class="fa fa-docs"></i></div></div>&gt; source /opt/intel/oneapi/setvars.sh
                                        &gt; export PATH=/home/etmongko/llvm/build/bin:$PATH
                                        &gt; export LD_LIBRARY_PATH=/home/etmongko/llvm/build/lib:$LD_LIBRARY_PATH</pre>
                                </p>
                            </div>
                        <p>Now I run the Codeplay compiler to generate my CUDA-enabled binary:</p>
                        <div class="p-2" style="border: 1px solid #CCCCCC; background-color: #F8F8F8;">
                            <div class="float-end ">
                                <i class="fa-solid fa-copy fs-4" style="color: #0068B5;"></i>
                            </div>
                            <p class="m-0">
                                <pre><div class="toolbar"><div class="toolbar-item"><i class="fa fa-docs"></i></div></div>&gt; clang++ -fsycl -fsycl-targets=nvptx64-nvidia-cuda -DSYCL_USE_NATIVE_FP_ATOMICS -o jacobiSyclCuda main.cpp jacobi.cpp -I ../Common/</pre>
                            </p>
                        </div>
                        <p>This generated the jacobiSyclCuda binary. Let’s give it a try!</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/sycl5.png" alt="" width="100%">
                        </div>

                        <p class="utility-text-1" style="text-align:center"><em>Ugh. Not good.</em></p>
                        <p>Ouch! A Segmentation Fault is not a good start. The good news is that I found the issue with
                            a little debugging. I had both oneAPI and the Codeplay libraries in my path, which caused
                            some issues. To get around the issues, I opened a new terminal and simply ran:</p>
                            <div class="p-2" style="border: 1px solid #CCCCCC; background-color: #F8F8F8;">
                                <div class="float-end ">
                                    <i class="fa-solid fa-copy fs-4" style="color: #0068B5;"></i>
                                </div>
                                <p class="m-0">
                                <pre class=""><div class="toolbar"><div class="toolbar-item"><i class="fa fa-docs"></i></div></div>> export LD_LIBRARY_PATH=/home/etmongko/llvm/build/lib:$LD_LIBRARY_PATH</pre>
                                </p>
                            </div>
                        <p>to include just the Codeplay libraries. After this simple tweak, the SYCL code ran without
                            any problem on my GPU.</p>
                            <div class="my-5">
                                <img src="../img/rushita_img/sycl6.png" alt="" width="100%">
                            </div>
                        <p class="utility-text-1" style="text-align:center"><em>It works!</em></p>
                        <p>Yay! We can see that the CPU time is similar to the baseline example. Additionally, the GPU
                            portion is significantly faster than using the CPU, as in our second example. However, the
                            performance is not quite on par with the native CUDA implementation … which isn’t unexpected
                            because this was a simple migration from CUDA to SYCL without any optimizations.</p>

                        <h2 class="fw-light mt-5">Conclusion</h2>
                        <p>C++ with SYCL code can be compiled and run on multiple backends. In this case we went through
                            CPU and Nvidia GPU examples, but the beauty of SYCL is that it allows us to leverage other
                            backends.</p>
                        <p>(Teaser: In my next blog I’ll be testing out developer workflows with a brand new laptop
                            based on Intel® Arc™ A370M hardware, so we’ll see how SYCL enables multiple vendor
                            backends.)</p>
                        <p>As a developer, I think alignment on hardware-agnostic solutions will eventually make our
                            lives easier, we just need to get there. Migrating from CUDA to SYCL is not trivial, but
                            there is a lot of community support around it and the tools are continually getting better.
                        </p>
                        <p>Wouldn’t it be nice if as new hardware came out you could run your code on it if it happened
                            to be faster or more power-efficient or more cost-effective? That’s a question for another
                            time and discussion, but it is a nice thought.</p>
                        <p class="p-3 k_plink1 k_intext1blue1" style="text-align:center; background-color: #E6E6E6;"><strong>Want to
                                Connect?</strong> If you want to see what random tech news I’m reading, you can <a
                                href="#">follow me on X&nbsp;(formerly Twitter)</a>.</p>
                        <hr>

                        <h2 class="fw-light mt-5">Discover More Related Content</h2>
                        <h3>Blogs</h3>
                        <ul>
                            <li class="k_plink1 k_intext1blue1 tab-pane-content"><a
                                    href="../rushita_Solutions/k_solutions_Build-oneAPI-Applications-using-VS-Code-WSL2.html">Leveraging
                                    Tools for Cross-Platform Software Development</a></li>
                        </ul>
                        <h3>On-Demand Webinars<a class="inpage-nav-anchor" id="inpage-nav-6-1"></a></h3>
                        <div class="tab-pane-content">
                            <ul>
                                <li class="tab-pane-content k_plink1 k_intext1blue1"><a
                                        href="../rushita_Solutions/k_solutions_Scale C++Apps-with-oneTBB-Concurrent-Containers.html">Scale
                                        C++ Applications Efficiently with TBB Concurrent Containers </a></li>
                                <li class="tab-pane-content k_plink1 k_intext1blue1"><a
                                        href="../rushita_Solutions/k_solutions_Tech-Decoded-Library.html">Intel®
                                        MPI Library Boosts Performance &amp; Supports Container &amp; Cloud</a></li>
                                <li class="tab-pane-content k_plink1 k_intext1blue1"><a
                                        href="../dhruvin_developer-tools/ds_Developer-Zone.html">Tips
                                        to Improve Heterogeneous Application Performance</a></li>
                            </ul>

                            <h3>Get the Software<a class="inpage-nav-anchor" id="inpage-nav-6-2"></a></h3>

                            <div class="tab-pane-content k_plink1 k_intext1blue1"><strong><a
                                        href="../VK_developers/VK_Intel_oneAPI_base_toolkit.html">Intel® oneAPI
                                        Base Toolkit</a></strong><br>
                                Get started with this core set of tools and libraries for developing high-performance,
                                data-centric applications across diverse architectures.</div>

                            <div class="tab-pane-content k_plink1 k_intext1blue1"><br>
                                <strong class="k_plink1 k_intext1blue1"><a
                                        href="../VK_developers/VK_Intel_oneAPI_base_toolkit_download.html">Get
                                        It Now</a></strong><br>
                                <br>
                                <a href="../VK_developers/VK_client_toolkit.htmlFigure 4. The original CUDA* N-body code (top) and the converted SYCL* code (bottom) give comparable performance.">See All Tools</a>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
    </section>
    <section class="my-4" style="font-size: 13px;">
        <div class="k_container11">
            <div class="row">
                <div>
                    <hr class="mb-5">
                    <p>Product and Performance Information </p>
                    <div class="k_plink1 k_intext1blue1"><sup>1</sup>Performance varies by use, configuration and other
                        factors. Learn more at &nbsp;<a href="#">www.Intel.com/PerformanceIndex.</a>.
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div id="footer"></div>
    <script>
        // navbar include  
        fetch('../y_index/y_navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
        // footer include 
        fetch('../y_index/y_footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script src="../js/jquery-3.7.1.js"></script>

    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/rushita.js"></script>
</body>

</html>