<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reduction Operations in DPC++</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href=" https://fonts.cdnfonts.com/css/intel-clear " rel="stylesheet">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/yatri.css">
    <link rel="stylesheet" href="../css/rushita.css">
    <link rel="stylesheet" href="../css/rushita_automotive.css">

    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <style>
        * {
            font-family: 'Intel Clear', sans-serif;
        }

        .keyword {
            color: #006699 !important;
            font-weight: bold;
        }

        .string {
            color: #002BFE;
            font-weight: bold;
        }

        .operator {
            color: #B24558;
        }

        .property {
            color: #006699;

            font-weight: bold;
        }

        .punctuation {
            color: #A7A7A7;
        }

        .icon_k {
            color: #0068B5 !important;
        }

        .k_btn {
            height: 80px;
        }

        .code-simple {
            background-color: #E6E6E6;
        }

        pre {
            white-space: pre-line !important;
        }

        .rwd .token.atrule,
        .rwd .token.attr-value,
        .rwd .token.keyword {
            color: #069 !important;
            font-weight: 700 !important;
        }

        .k_tab-container ul li a.active {
            border-bottom: none !important;
            background-color: #FFFFFF !important;
            border: 2px solid #CCCCCC;
        }
    </style>
</head>

<body>
    <div id="navbar"></div>

    <section class="m_ai_tdrop">
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Developers
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Zone.html">Overview</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Control-flow-Enforcement_Technology.html">Topics
                        & Technologies</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Development-Tools.html">Tools</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Hardware-Platforms.html">Hardware
                        Platforms</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Resource-Documentation-Center.html">Resources &
                        Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Learn.html">Learn</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Communities-and-Events.html">Community & Events</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Programs.html">Developer Programs</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Get-Help.html">Get
                        Help</a></li>
            </ul>
        </div>


        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tools
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="../Product/B20_developer_catelog.html">Software
                        Catalog</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B17_oneapi.html">oneAPI</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Tiber™Edge-Platform.html">Intel® Tiber™ Edge
                        Platform</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B10_intel_Quarts.html">FPGA</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_technology_sdk.html">Intel®
                        Active Management Technology SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_intel_adviser.html">Intel®
                        Advisor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® AI Reference Models</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Collaboration-Suite-for-WebRTC.html">Intel®
                        Collaboration Suite for WebRTC SDK</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B1_19_Intel_AICloud.html">Intel® Tiber™
                        AI Cloud</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-Python.html">Intel® Distribution
                        for Python*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-GDB.html">Intel® Distribution for
                        GDB*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® DPC++ Compatibility Tool</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Dynamic Application Loader</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Topics_viewall_Cloud-Insider-Program_AI-Frameworks-and-Tools.html">Frameworks</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Embree</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_ai_scikit.html">Intel® Extension
                        for Scikit-learn*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Fortran-Compiler.html">Intel® Fortran Compiler</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Graphics Performance Analyzers</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-HE-Toolkit.html">Intel® Homomorphic Encryption
                        Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-In-Band-Manageability.html">Intel® In-Band
                        Manageability</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Cryptography-Primitives-Library.html">Intel®
                        Integrated Performance Primitives</a></li>
                <li><a class="dropdown-item m_dropActive" href="../rushita_Solutions/">Intel® Integrated Simulation
                        Infrastructure with
                        Modeling</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Instruction-Set-Architecture(ISA)Extensions.html">Instruction
                        Set Architecture (ISA) Extensions</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Intelligent-Storage-Acceleration-Library.html">Intel®
                        Intelligent Storage Acceleration Library
                        (Intel® ISA-L)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Modin*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® MPI Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Neural Compressor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenCL™ Runtime</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Image Denoise</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Path Guiding Library (Intel® Open
                        PGL)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Pin</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Platform Analysis Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Software</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Applications</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OpenSWR</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenVINO™ Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Volume Kernel Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Optimization for XGBoost*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay for Hydra*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay Studio</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">PyTorch* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">TensorFlow* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Rendering Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Smart Edge Open</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Guard Extensions</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Secure Device Onboard</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Development Emulator</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Trust Domain Extensions (Intel® TDX)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Quantum SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Query Processing Library (Intel® QPL)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Video Processing Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® VTune™ Profiler</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Resellers</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                oneAPI
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Overview</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Data Parallel C++/SYCL*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Toolkits</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Tech Articles & How-Tos</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Components</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Code Samples</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Training</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Support</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tech Articles & How-Tos
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">News Updates</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Webinars</a></li>

            </ul>
        </div>

        <div class="m_ai_shlash">/</div>
        <div class="m_ai_httl">Reduction Operations in DPC++
        </div>
    </section>
    <section class="k_bgblue py-4">
        <div class="k_container11">

            <div class="row  g-4">
                <div class="col-md-10 col-sm-12 mx-0 text-white align-content-center k_tstartauto k_text2 px-0 mx-0">
                    <h3 class="fw-lighter   mb-2 k_marketsmall">
                        Tutorial: Program with DP C++
                    </h3>
                    <div id="hiddenContent">

                        <div class="d-lg-flex gap-5 mt-4 k_dwrap">
                            <div class="k_mdflex ">
                                <p>ID</p>
                                <p>673111</p>

                            </div>

                            <div class="k_mdflex ">
                                <p>Updated</p>
                                <p style="justify-content: end;">10/30/2020</p>
                            </div>
                            <div class="k_mdflex ">
                                <p>Version</p>
                                <p style="justify-content: end;">Latest</p>
                            </div>
                            <div class="k_mdflex ">
                                <p>&nbsp;</p>
                                <p style="justify-content: end;">Public</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
    </section>
    <section class="k_space k_spacenone">
        <div class="k_container11">
            <div class="row  g-3">
                <div class="float-end k_bignone" style="padding-left:70%;">
                    <div>
                        <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                        <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-12">
                    <div class="VK_sticky_side_bar VK_side_bar_postion_stickey">
                        <div>
                            <div class="VK_sidebar_dropdown">
                                <ul class="k_listnone k_menu ">
                                    <li class="k_text"><a href="#">Who Is This Tutorial For?</a></li>
                                    <li class="k_text"><a href="#">Who Is This Tutorial Not For?</a></li>
                                    <li class="k_text"><a href="#">The Tutorial</a></li>
                                    <li class="k_text"><a href="#">Vector Addition in SYCL</a></li>
                                    <li class="k_text"><a href="#">SYCL Queues</a></li>
                                    <li class="k_text"><a href="#">Manage Data in SYCL Using Buffers</a></li>
                                    <li class="k_text"><a href="#">Control Device Execution</a></li>
                                    <li class="k_text"><a href="#">Review of Your First SYCL Program</a></li>
                                    <li class="k_text"><a href="#">SYCL 2020 USM</a></li>
                                    <li class="k_text"><a href="#">SYCL 2020 Terse Syntax</a></li>
                                    <li class="k_text"><a href="#">Other Resources</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div style="background-color: #F7F7F7;">
                        <p><b>Get the Latest on All Things CODE</b></p>
                        <p class="text-center k_btnlearn py-1 k_text m-auto k_under k_btn100"
                        style="float: inline-start; width: 130px; background-color: #0068B5;">
                        <a href="../rushita_Solutions/k_solutions_Stay-in-the-Know-on-All-Things-CODE.html" class="text-white">Sign Up</a>
                        </p>
                    </div>
                </div>
                <div class="col-lg-8 col-md-7 col-sm-12  k_16smpx k_width75">
                    <div class="float-end mx-3 k_smnone">
                        <div>
                            <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                            <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                        </div>
                    </div>
                    <div class=" k_smpaddnone k_smpaddnone1 pt-5">
                        <h3>A Tutorial for Developing SYCL Kernels<a class="inpage-nav-anchor" id="-undefined"></a></h3>
                        <div class="shareWrapper">Jeff Hammond, principal engineer<br>
                            <a href="https://x.com/IntelDevTools" rel="noopener noreferrer">@IntelDevTools</a></div>
                        <div class="p-4" style="background-color: #E6E6E6; border-left: 3px solid #FDB813;">
                            <p class="k_plink1 k_intext1blue1">Editor’s note: This tutorial was adapted, with his permission and assitance, from <a href="#">Jeff Hammond's GitHub* repository</a>.</p>
                        </div>
                        <p class="k_plink1 k_intext1blue1">This is an introduction to the <a href="#">DPC++</a>&nbsp;and SYCL coding. DPC++ is an LLVM C++ compiler to implement&nbsp;the SYCL standard.</p>
                        <h1 class="fw-light mt-5">Who Is This Tutorial For?</h1>
                        <p>This tutorial is for programmers who already have a decent understanding of C++ and parallelism. Teaching C++ and parallelism is hard and many materials already exist. There's far less information on SYCL&nbsp;itself and even less about DPC++ so that's our focus.</p>
                        <p>SYCL is derived from OpenCL&nbsp;technology, and the run models are similar. For help with the models, see <a href="https://www.khronos.org/assets/uploads/developers/library/2012-pan-pacific-road-show-June/OpenCL-Details-Taiwan_June-2012.pdf" rel="noopener noreferrer">this overview</a>.</p>
                        <p>&nbsp;</p>
                        <h1 class="fw-light mt-5">Who Is This Tutorial Not For?</h1>
                        <p>If you like modern C++, you'll like SYCL because it’s definitely modern C++. Conversely, if you hate C++, you'll hate SYCL and DPC++. So, if you don’t want to write modern C++, this tutorial is not for you.</p>
                        <p>OpenMP 5.0 offers many of the same features as SYCL and DPC++ but supports the ISO language triumvirate of C++, C, and Fortran. To program CPUs and GPUs using Fortran, C, or premodern C++ (before C++11) using an open-industry standard, try the OpenMP code.</p>
                        <p>Another alternative to SYCL and DPC++ without C++ is OpenCL code. OpenCL code is more verbose than SYCL, but if you're a C programmer, you likely prefer explicit control to syntactic efficiency.</p>
                        <h1 class="fw-light mt-5">The Tutorial</h1>
                        <p>Let's start with vector addition, which is the “Hello, world!” of high-performance computing (HPC) and numerical computation. Printing “Hello, world!” doesn’t make sense in a programming model used for doing lots of things in parallel.</p>
                        <p>&nbsp;</p>
                        <h2 class="fw-light mt-5">Vector Addition in SYCL</h2>
                        <p>The operation called single-precision A times X plus Y (SAXPY) can be implemented in C or C++ as follows:</p>
                        <div class="my-5 ">
                            <img src="../img/rushita_img/program.jpg" alt="" width="100%">
                        </div>
                        <p>There are lots of ways to write this in C++. For example, you can use ranges that makes the code look a more like the upcoming SYCL version. But teaching you every possible way to write a loop in C++ isn’t the point of this tutorial, and the version that looks like C is common knowledge.</p>
                        <p>Here’s the same loop in SYCL. Let's break down in pieces:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/program1.jpg" alt="" width="100%">
                        </div>
                        <p>As you might have guessed, <strong>parallel_for </strong>is a parallel-for loop. The loop body is expressed as a lambda. The lambda is the code that looks like [..]{..}.</p>
                        <p>The loop iterator is expressed in terms of a <strong>sycl::range </strong>and a <strong>sycl::id</strong>. In our simple example, both are one dimension, as indicated by the <strong>&lt;1&gt;</strong>. SYCL ranges and IDs can be one-, two-, or three-dimensional. (The OpenCL technology and CUDA* have the same limitation.)</p>
                        <p>It may be a bit unfamiliar to write loops like this, but it’s consistent with how lambdas work. However, the pattern is familiar if you ever used <a href="https://github.com/uxlfoundation/oneDPL" rel="noopener noreferrer">Parallel STL</a>, <a href="https://github.com/uxlfoundation/oneTBB" rel="noopener noreferrer">oneAPI Threading Building Blocks</a>, <a href="https://github.com/kokkos/kokkos/" rel="noopener noreferrer">Kokkos</a>, or <a href="https://github.com/LLNL/RAJA" rel="noopener noreferrer">RAJA</a>.</p>
                        <p>You might be wondering about the <strong>&lt;class saxpy&gt;</strong> template argument to <strong>parallel_for</strong>. This is just a way to name the kernel, which is necessary for using SYCL with a different host C++ compiler than the SYCL device compiler. In this case, the two compilers need a way to agree on the kernel name. In many SYCL compilers, such as the Intel® oneAPI DPC++ Compiler, this isn’t necessary. The option <strong>-fsycl-unnamed-lambda</strong> instructs the compiler to not look for names.</p>
                        <p>The purpose of <strong>h</strong> in <strong>h.parallel_for </strong>is covered later in this article.</p>
                        <p>&nbsp;</p>
                        <h2 class="fw-light mt-5">SYCL Queues</h2>
                        <p>One challenge of heterogeneous programming is the multiple types of processing elements and often different memory types. These things make compilers and runtimes more complicated. The SYCL programming model embraces heterogeneous running, although at a much higher level than the OpenCL technology. Not everything is explicit, either. Unlike other popular GPU programming models, SYCL kernels can be put in-line into the host program flow, which improves readability.</p>
                        <p>Whenever you want to compute on a device, you need to create a work queue:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/program3.jpg" alt="" width="100%">
                        </div>
                        <p>The default selector favors a GPU, if present, and a CPU otherwise. Create queues associated with specific device types using this code:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/program2.jpg" alt="" width="100%">
                        </div>
                        <p>The host and CPU selectors may lead to significantly different results, even though they target the same hardware. The host selector might use a sequential implementation optimized for debugging while the CPU selector uses the OpenCL Runtime and runs across all the cores. Also, the OpenCL technology just-in-time compiler might generate different code because it’s using a different compiler altogether. Don’t assume that just because the host is a CPU, that host and CPU mean the same thing in SYCL.</p>
                        <p>&nbsp;</p>
                        <h2 class="fw-light mt-5">Manage Data in SYCL Using Buffers</h2>
                        <p>The canonical way to manage data in SYCL is with buffers. A SYCL buffer is an opaque container. This is an elegant design, but some applications need pointers, which are provided by the Unified Shared Memory (USM) extension, discussed later</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/program4.jpg" alt="" width="100%">
                        </div>
                        <p>In the previous example, you allocate a C++ container on the host and then hands it over to SYCL. Until the destructor of the SYCL buffer is invoked, you can only access the data through a SYCL mechanism. SYCL accessors are the important aspect of SYCL data management with buffers (explained later).</p>
                        <h2 class="fw-light mt-5">Control Device Execution</h2>
                        <p>Because device code may require a different compiler or code generation mechanism from the host, it’s necessary to clearly identify sections of device code. The following image shows how this looks in SYCL 1.2.1. We use the submit method to enqueue work to the device queue, <strong>q</strong>. This method returns an opaque handler against which kernels run, in this case via <strong>parallel_for</strong>.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/program5.jpg" alt="" width="100%">
                        </div>
                        <p>You can synchronize device execution using the <strong>wait()</strong> method. There are finer-grain methods for synchronizing device running, but we start with simplest one, which is a heavy hammer.</p>
                        <p>Some may find the previous code verbose, particularly when compared to models like Kokkos. The Intel oneAPI DPC++ Compiler supports a terse syntax, which is covered in the next section.</p>
                        <p>&nbsp;</p>

                        <h1 class="fw-light mt-5">Compute Kernels and Buffers</h1>
                        <p class="fw-light">Implementing and Tuning the Common Reduction Parallel Pattern</p>
                        <div class="d-md-flex gap-4">
                            <div>
                                <p>Ramesh Peri, senior principal engineer, Intel Corporation</p>
                                <p class="k_plink1 k_intext1blue1"><a href="#"
                                        style="cursor:default;">@IntelDevTools</a></p>
                            </div>
                            <div>
                                <p><strong>Get the Latest on All Things CODE</strong></p>
                                <div>
                                    <p class="text-center k_btnlearn py-1 k_text m-auto k_under k_btn100"
                                    style="float: inline-start; width: 130px; background-color: #0068B5;">
                                    <a href="../rushita_Solutions/k_solutions_Stay-in-the-Know-on-All-Things-CODE.html" class="text-white">Sign Up</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <h2 class="fw-light mt-5">An Introduction to the Reduction Operation</h2>
                        <p>Reduction is a common operation in parallel programming that reduces the elements of an array
                            into a single result. Let’s say you want to add the elements of a large array into a single
                            sum (Figure 1). Doing this operation in parallel requires the computation of partial sums
                            that are sequentially combined, or reduced, to produce the final result. Reduction operators
                            (for example, summation, minimum, maximum, minimum location, and maximum location) are
                            associative and are often commutative. There are many ways to implement a reduction, and its
                            performance depends on the underlying processor architecture. This article explores several
                            ways to express reductions in Data Parallel C++ (DPC++) and discusses the performance
                            implications of each.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction1.png" alt="" width="100%">
                        </div>
                        <p style="text-align:center">Figure 1. Pictorial representation of a summation reduction</p>
                        <h3>&nbsp;</h3>
                        <h2 class="fw-light mt-5">Reduction in DPC++ Using Global Atomics</h2>
                        <p>In the following implementation, each work item in the DPC++ kernel is responsible for an
                            element of the input array and atomically updates a global variable:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction2.jpg" alt="" width="100%">
                        </div>
                        <p>Depending on the number of threads created by the compiler (which in turn depends on the
                            default workgroup and subgroup sizes chosen by the compiler for the target device), the
                            contention for accessing the single global variable, <strong>sum_buf</strong>, will be quite
                            high. In general, the performance of such a solution will not be very good.</p>

                        <h2 class="fw-light mt-5">Reducing Contention on Global Atomics</h2>
                        <p>One way to reduce the contention on the global variable update is to decrease the number of
                            threads accessing this variable. This can be achieved by making each work item process
                            multiple elements of the array, perform a local reduction on a chunk of elements, and then
                            perform the global atomic update (Figure 2).</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction3.png" alt="" width="100%">
                        </div>
                        <p style="text-align:center">Figure 2. Each work item computes a partial sum</p>
                        <p>&nbsp;</p>
                        <p>This implementation is shown in the following code:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction4.jpg" alt="" width="100%">
                        </div>
                        <p>This implementation is not very efficient because each work item is accessing contiguous
                            locations in memory, which causes the compiler to generate inefficient code. The DPC++
                            compiler treats each work item like a vector lane, so work items accessing contiguous
                            locations of memory will be inefficient.</p>

                        <h2 class="fw-light mt-5">Efficient Access of Memory by Work Item</h2>
                        <p>The DPC++ compiler maps each work item to a vector lane of the underlying processor, which
                            allows the compiler to generate efficient code when the work items access memory locations
                            with a stride greater than the vector length of the processor. This access pattern is shown
                            in Figure 3, where each of the labels (wi-1, wi-2, and so on) represent each of the n work
                            items.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction5.png" alt="" width="100%">
                        </div>
                        <p style="text-align:center">Figure 3. Each work item computes a partial sum from noncontiguous
                            memory locations<br> &nbsp;</p>
                        <p>The kernel where each work item operates on multiple, interleaved elements of the input
                            vector is shown in the following code:</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction6.jpg" alt="" width="100%">
                        </div>
                        <p>The choice of number of work items is important. It is selected to be the product of the
                            number of processing elements and the preferred vector width of the processing element. This
                            number may be sufficient on some platforms, but perhaps not for others where the number of
                            threads supported is much larger than the number of processing elements. Consequently, this
                            number must be chosen carefully based on the target platform.</p>

                        <h2 class="fw-light mt-5">Tree Reduction</h2>
                        <p>A tree reduction is a popular technique in which each of the work items in a kernel apply the
                            reduction operator to adjacent elements, producing intermediate results with multiple
                            levels. This can be applied within a workgroup, as shown in Figure 4, because thread
                            scheduling and synchronization are highly efficient, with hardware support within a
                            workgroup.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction.png" alt="" width="100%">
                        </div>
                        <p style="text-align:center">Figure 4. Tree reduction<br> &nbsp;</p>
                        <p>The size of a workgroup is fairly small (about 256 or 512) and is dependent on the hardware
                            device, while the number of elements to be reduced is an order of magnitude larger than the
                            workgroup size. This means that the reduction operation performed by each workgroup produces
                            an intermediate result that needs to be further reduced. This can be handled in two ways:
                        </p>
                        <ol>
                            <li>By each workgroup calling a global atomic add with its intermediate result, as shown in
                                the following code:<br> &nbsp;
                               <div class="my-5">
                                    <img src="../img/rushita_img/reduction7.jpg" alt="" width="100%">
                               </div>
                            </li>
                            <li>By calling the same reduction kernel once again on the list of intermediate values
                                produced by the workgroups to produce another set of intermediate values. At some point,
                                once the number of intermediate results is small enough, one can simply use the global
                                atomic updates instead of calling the kernel to get the final result.</li>
                            <li>The kernel implementing this technique is shown below. Here, the output of the kernel is
                                another set of values that are stored by each workgroup in the output buffer.<br> &nbsp;
                                <div class="my-5">
                                    <img src="../img/rushita_img/reduction8.jpg" alt="" width="100%">
                               </div>
                            </li>
                        </ol>
                        <p>&nbsp;</p>
                        <p>The previous two kernels can be called as shown below to get the final result. Here,
                            <strong>X</strong> is the size of the intermediate result where the final atomics-based
                            reduction is called, and this value is chosen based on the efficiency of the global
                            atomics-based reduction.</p>
                        <p>&nbsp;</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction9.jpg" alt="" width="100%">
                        </div>

                        <h2 class="fw-light mt-5">DPC++ Built-In Reduction Operator</h2>
                        <p>DPC++ provides a summation reduction operator, which is used in the kernel below. In this
                            case, the compiler chooses an implementation that is the most efficient for the underlying
                            platform. It is usually recommended to use the built-in reduction operator.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/reduction10.jpg" alt="" width="100%">
                        </div>

                        <h2 class="fw-light mt-5">Final Thoughts</h2>
                        <p>Reduction is a common parallel programming pattern used in many applications. This article
                            explored some ways of implementing this operation in DPC++. The performance of these
                            implementations can be quite different depending on the compiler and the target platform.
                            The next article explores the performance of these kernels on CPUs and GPUs.</p>

                        <h2 class="fw-light mt-5">Further Reading and Resources</h2>
                        <ul>
                            <li class="k_plink1 k_intext1blue1"><a href="#">oneAPI</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="../Product/B17_oneapi.html">Intel oneAPI Toolkits</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="">Data
                                    Parallel C++: Master DPC++ for Programming of Heterogeneous Systems Using C++ and
                                    SYCL*</a></li>
                        </ul>
                        <h3 class="fw-light">______</h3>
                        <div class="row">
                            <div class="mt-5">
                                <h2 class="fw-light fs-3 mb-4">You May Also Like</h2>
                            </div>
                            <div>
                                <div class="k_table-container">
                                    <table class="k_tebal col-lg-12  col-md-8 col-sm-3  k_tspace">
                                      
                                        <tbody class="k_tebal k_14px">
                                            <tr class="  k_rightborder1 k_tpadding1 k_tsmall">
                                               <td>
                                                    <strong>Get the Software</strong>
                                                    <h3 class="k_plink1 k_intext1blue1"><a href="#">Intel® oneAPI Base Toolkit</a></h3>
                                                    <p>Get started with this core set of tools and libraries for developing high-performance, data-centric applications across diverse architectures.</p>
                                                    <div class="d-md-flex gap-2">
                                                        <div>
                                                            <p class="text-center k_btnlearn py-1 k_text m-auto k_under k_btn100"
                                                            style="float: inline-start; width: 130px; background-color: #0068B5;">
                                                            <a href="#" class="text-white">Get It Now</a>
                                                            </p>
                                                        </div>
                                                        <div>
                                                            <p class="k_plink1 k_intext1blue1"><a href="../VK_developers/VK_client_toolkit.html"> See All Tools  </a></p>
                                                        </div>
                                                    </div>
                                               </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                  
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

    </section>
    <section class="my-4" style="font-size: 13px;">
        <div class="k_container11">
            <div class="row">
                <div>
                    <hr class="mb-5">
                    <p>Product and Performance Information </p>

                    <div class="k_plink1 k_intext1blue1"><sup>1</sup>Performance varies by use, configuration and other
                        factors. Learn more at &nbsp;<a
                            href="../Product/B1_1_5xeon6_performance_Index.html">www.Intel.com/PerformanceIndex.</a>.
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div id="footer"></div>
    <script>
        // navbar include  
        fetch('../y_index/y_navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
        // footer include 
        fetch('../y_index/y_footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabLinks = document.querySelectorAll('.k_tab-container ul li a');
            const tabContents = document.querySelectorAll('.k_custom-tab-content');

            function setActiveTab(tabId) {
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                tabLinks.forEach(link => {
                    link.classList.remove('active');
                });

                document.getElementById(tabId).classList.add('active');
                document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            }

            tabLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    setActiveTab(tabId);
                });
            });

            setActiveTab('gaming');
        });
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const tabLinks = document.querySelectorAll('.k_tab-container ul li a');
            const tabContents = document.querySelectorAll('.k_custom-tab-content');

            function setActiveTab(tabId) {
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                tabLinks.forEach(link => {
                    link.classList.remove('active');
                });

                document.getElementById(tabId).classList.add('active');
                document.querySelector(`[data-tab="${tabId}"]`).classList.add('active');
            }

            tabLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    setActiveTab(tabId);
                });
            });

            setActiveTab('gaming');
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script src="../js/jquery-3.7.1.js"></script>

    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/rushita.js"></script>
</body>

</html>