<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using oneTBB for Memory Allocation in C++ Apps</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href=" https://fonts.cdnfonts.com/css/intel-clear " rel="stylesheet">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/yatri.css">
    <link rel="stylesheet" href="../css/rushita.css">
    <link rel="stylesheet" href="../css/rushita_automotive.css">

    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <style>
        * {
            font-family: 'Intel Clear', sans-serif;
        }

        .dk_new_options_table {
            border: none !important;
            justify-content: center !important;
            text-align: center !important;
        }

        .dk_new_options_table thead tr td {
            margin-left: 0;
            max-width: fit-content;
            white-space: normal;
            overflow: auto;
            background: #fff;
            padding: 1rem;
            text-align: left;
            border-left: .125rem solid #e2e2e2;
            font-weight: 700 !important;
        }

        .dk_new_options_table thead tr:nth-child(even) td {
            background-color: #f7f7f7;
        }

        .mv_intel_amx h2 {
            font-weight: 300;
        }

        .mv_intel_amx {
            font-size: 1.25rem;
        }

        .mv_intel_amx_bg_color {
            background-color: #0068B5;
        }

        .mv_intel_amx_content {
            padding-right: 200px;
        }

        .mv_intel_amx_item {
            align-content: center;
        }

        .mv_intel_amx {
            color: #fff;
            padding: 1rem;
        }

        .mv_intel_amx h3 {
            font-weight: 300;
        }

        .mv_intel_amx p {
            margin-top: 1.5rem;
            margin-bottom: 0rem;
        }

        .mv_intel_amx_image {
            padding: 1rem;
        }

        .mv_intel_amx_image img {
            width: 100%;
            /* height: 199px; */
        }

        .mv_intel_amx_heading_text {
            font-size: 1.2rem;
            line-height: 1.15;
        }

        .VK_sidebar_active_link {
            color: #262626;
            font-weight: 700;
        }

        .VK_sidebar_active_link:hover {
            color: #262626;
        }

        .VK_print_email_font span {
            font-size: 1.375rem;
        }

        .VK_side_bar_postion_stickey {
            position: sticky;
            top: 0px;
            z-index: 3;
            background-color: #fff;
        }

        .VK_side_heading {
            font-size: 26px;
            font-weight: 400;
        }

        .VK_sidebar_dropdown P {
            margin-left: .313rem !important;
            margin-bottom: .313rem !important;
        }

        .VK_sidebar_dropdown details {
            margin-left: .313rem !important;
            margin-bottom: .313rem !important;
        }

        code {
            color: #000 !important;
            background-color: #E6E6E6;
        }

        .k_btn {
            height: 80px;
        }

        .code-simple {
            background-color: #E6E6E6;
        }

        pre {
            white-space: pre-line !important;
        }
    </style>
</head>

<body>
    <div id="navbar"></div>

    <section class="m_ai_tdrop">
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Developers
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Zone.html">Overview</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Control-flow-Enforcement_Technology.html">Topics
                        & Technologies</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Development-Tools.html">Tools</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Hardware-Platforms.html">Hardware
                        Platforms</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Resource-Documentation-Center.html">Resources &
                        Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Learn.html">Learn</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Communities-and-Events.html">Community & Events</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Programs.html">Developer Programs</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Get-Help.html">Get
                        Help</a></li>
            </ul>
        </div>


        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tools
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="../Product/B20_developer_catelog.html">Software
                        Catalog</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B17_oneapi.html">oneAPI</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Tiber™Edge-Platform.html">Intel® Tiber™ Edge
                        Platform</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B10_intel_Quarts.html">FPGA</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_technology_sdk.html">Intel®
                        Active Management Technology SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_intel_adviser.html">Intel®
                        Advisor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® AI Reference Models</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Collaboration-Suite-for-WebRTC.html">Intel®
                        Collaboration Suite for WebRTC SDK</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B1_19_Intel_AICloud.html">Intel® Tiber™
                        AI Cloud</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-Python.html">Intel® Distribution
                        for Python*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-GDB.html">Intel® Distribution for
                        GDB*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® DPC++ Compatibility Tool</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Dynamic Application Loader</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Topics_viewall_Cloud-Insider-Program_AI-Frameworks-and-Tools.html">Frameworks</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Embree</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_ai_scikit.html">Intel® Extension
                        for Scikit-learn*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Fortran-Compiler.html">Intel® Fortran Compiler</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Graphics Performance Analyzers</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-HE-Toolkit.html">Intel® Homomorphic Encryption
                        Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-In-Band-Manageability.html">Intel® In-Band
                        Manageability</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Cryptography-Primitives-Library.html">Intel®
                        Integrated Performance Primitives</a></li>
                <li><a class="dropdown-item m_dropActive" href="../rushita_Solutions/">Intel® Integrated Simulation
                        Infrastructure with
                        Modeling</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Instruction-Set-Architecture(ISA)Extensions.html">Instruction
                        Set Architecture (ISA) Extensions</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Intelligent-Storage-Acceleration-Library.html">Intel®
                        Intelligent Storage Acceleration Library
                        (Intel® ISA-L)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Modin*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® MPI Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Neural Compressor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenCL™ Runtime</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Image Denoise</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Path Guiding Library (Intel® Open
                        PGL)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Pin</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Platform Analysis Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Software</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Applications</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OpenSWR</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenVINO™ Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Volume Kernel Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Optimization for XGBoost*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay for Hydra*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay Studio</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">PyTorch* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">TensorFlow* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Rendering Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Smart Edge Open</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Guard Extensions</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Secure Device Onboard</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Development Emulator</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Trust Domain Extensions (Intel® TDX)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Quantum SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Query Processing Library (Intel® QPL)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Video Processing Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® VTune™ Profiler</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Resellers</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                oneAPI
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Overview</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Data Parallel C++/SYCL*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Toolkits</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Tech Articles & How-Tos</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Components</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Code Samples</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Training</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Support</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tech Articles & How-Tos
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">News Updates</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Webinars</a></li>
                
            </ul>
        </div>
       
        <div class="m_ai_shlash">/</div>
        <div class="m_ai_httl">Using oneTBB for Memory Allocation in C++ Apps
        </div>
    </section>
    <section class="k_bgblue py-5">
        <div class="k_container11">
          
            <div class="row  g-4">
                <div class="col-md-10 col-sm-12 mx-0 text-white align-content-center k_tstartauto k_text2 px-0 mx-0">
                    <h2 class="fw-lighter   mb-2 k_marketsmall">How to Use oneTBB for Efficient Memory Allocation in C++ Applications
                    </h2>
            </div>
        </div>
    </section>
    <section class="k_space k_spacenone">
        <div class="k_container11">
            <div class="row  g-3">
                <div class="float-end k_bignone" style="padding-left:70%;">
                    <div>
                        <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                        <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-12">
                    <div class="VK_sticky_side_bar VK_side_bar_postion_stickey">
                        <div>
                            <div class="VK_sidebar_dropdown">
                                <ul class="k_listnone k_menu ">
                                    <li class="k_text"><a href="#">Introduction</a></li>
                                    <li class="k_text"><a href="#" class="k_submenu-toggle">oneTBB Overview</a>
                                        <ul class="k_listnone k_submenu">
                                            <li class="k_text"><a href="#">General architecture of oneTBB memory allocator</a></li>

                                            <li class="k_text"><a href="#" class="k_petamenu-toggle"></a>Frontend: handling small objects</a>
                                                <ul class="k_listnone k_petamenu">
                                                    <li class="k_text"><a href="#">Slab data structure</a></li>
                                                </ul>
                                            </li>
                                            <li class="k_text"><a href="#">Frontend: handling large objects</a></li>
                                            <li class="k_text"><a href="#">Backend: overall structure</a></li>
                                            <li class="k_text"><a href="#">oneTBB memory allocator templates</a></li>
                                            <li class="k_text"><a href="#">Scalable memory-pool feature</a></li>
                                            <li class="k_text"><a href="#">Memory API replacement library</a></li>
                                        </ul>
                                    </li>
                                    <li class="k_text"><a href="#" class="k_submenu-toggle">Wrap-up</a>
                                        <ul class="k_listnone k_submenu">
                                            <li class="k_text"><a href="#" ></a>Useful resources</a></li>
                                            <li class="k_text"><a href="#" ></a>Acknowledgements</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="p-3" style="background-color: #F7F7F7;">
                            <p><b>
                                    Get the Latest on All Things CODE</b></p>
                            <p class="text-center k_btnget py-2 k_under k_btn100 my-2 kcokbtn1024" style="width: 80px;">
                                <a href="#" class="text-white">Sign Up</a>
                            </p>
                        </div>
                        <div class="mt-3">
                            <p class="k_plink1 "><b>Nikita Sanjay Shiledarbaxi</b><br>
                                <i>AI/ML Software Marketing Engineer</i><br>
                                <a href="#">LinkedIn</a></p>
                                <p class="k_plink1 "><b>Nikita Ponomarev</b><br>
                                    <i>Middleware Development Engineer</i><br>
                                    <a href="#">LinkedIn</a></p>
                                    <p>Intel Corporation</p>
                        </div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-7 col-sm-12  k_16smpx k_width75">
                    <div class="float-end mx-3 k_smnone">
                        <div>
                            <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                            <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                        </div>
                    </div>
                    <div class=" k_smpaddnone k_smpaddnone1 pt-5">
                        <h2 class="fw-light mt-5">Introduction</h2>
                        <p>Dynamic memory allocation is a primary consideration when developing and optimizing any software application. It is an even tougher task in parallel applications, which have challenging demands, including:</p>
                        <ul>
                            <li>Moderate memory consumption</li>
                            <li>Faster memory allocation and deallocation among threads</li>
                            <li>Keeping allocated memory hot in the CPU cache</li>
                            <li>Avoiding the reaching of cache-associativity limits</li>
                            <li>Preventing false sharing and thread contention</li>
                        </ul>
                        <p>Numerous memory managers exhibit different efficiencies for different applications.</p>
                        <p class="k_plink1 k_intext1blue1">This blog focuses on one such memory allocator provided by the <a href="#">Intel® oneAPI Threading Building Blocks</a> (oneTBB) library.</p>
                        <p>oneTBB's approach maintains and expands on the API of the Standard Template Library (STL) template class <span class="code-simple">std::allocator</span>. It introduces two similar templates, <span class="code-simple">scalable_allocator&lt;T&gt;</span> and <span class="code-simple">cache_aligned_allocator&lt;T&gt;</span>, to address the critical issues in parallel programming listed above. &nbsp;</p>
                        <h2 class="fw-light mt-5">oneTBB Overview</h2>
                        <p>oneTBB is a flexible yet performant threading library that simplifies parallel programming in C++ across accelerated hardware. Supported for Windows*, Linux*, macOS*, and Android* applications, oneTBB can handle several tedious tasks such as adding parallelism to complex loop structures, memory allocation, and task scheduling.</p>
                        <h3>General architecture of oneTBB memory allocator</h3>
                        <div class="my-5">
                            <img src="../img/rushita_img/allocation1.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 1. Structure of oneTBB allocator</strong></p>
                        <p>oneTBB memory allocator consists of two distinct layers: frontend and backend (<strong>Figure 1</strong>).</p>
                        <p>The <strong>frontend</strong> acts as a caching layer, holding objects inside two storage types viz. per-thread heap and global heap. It requests memory from the backend. The <strong>backend</strong> reduces the number of expensive calls to the OS, serving the needs of the frontend while simultaneously avoiding significant fragmentation.</p>
                        <p>oneTBB memory allocator defines two types of objects: small (&lt;=8kB size) and large (&gt;8kB size); each has a different structure and allocation strategy. Let’s understand how frontend and backend handle memory allocation of these objects.</p>
                        <h3>Frontend: handling small objects</h3>
                        <p>oneTBB allocator uses a thread-private heap to cut down the amount of code that requires synchronization, reduce false sharing, and provide better scalability. Each thread allocates its own copy of the heap structure:</p>
                        <ul>
                            <li>A thread-local storage (TLS) mainly serves as a storage for small objects, but it can hold a moderately-sized pool of large objects for the same purpose, i.e., to reduce synchronization.</li>
                            <li>Small-object heap is segregated—it uses different storage bins to allocate objects of different sizes. A memory request is rounded up to the nearest object size. This technique provides better locality for similar-sized objects that are often used together.</li>
                        </ul>
                        <p>Bin storage is a widely used technique in oneTBB allocator. A bin only holds objects of a particular size, and it is organized as a doubly linked list of so-called slabs. At each moment, there is at most one active slab used to fulfill allocation request for a given object size. Once the active slab has no more free objects, the bin is switched to use the next partially empty slab (if available), otherwise an entirely empty slab. If nothing is available, a new slab is acquired. The slab with all its objects freed returns to the backend.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/allocation2.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 2. Slab structure for small objects</strong></p>
                        <h4>Slab data structure</h4>
                        <p>Let’s look further at what a slab data structure is and how it stacks small objects (<strong>Figure 2)</strong>.</p>
                        <p>Each slab block is a 16KB aligned structure accommodating objects of the same size. It is a free list allocator that connects unallocated regions of memory together into a Last-In First-Out (LIFO) linked list and makes malloc-free operations very simple.</p>
                        <p>To free an object, the library only has to link it to the top of the list.</p>
                        <p>To allocate an object, it simply needs to remove one from the top of the list and use it.</p>
                        <p>A foreign thread can interfere with the operations of the owning thread with cross-deallocation, possibly leading to slow down of the operation. To avoid that, two separate free lists are used for objects returned by the owner and by the foreign thread: public and private.</p>
                        <p>Public free list merges into the private list when the private free list cannot serve the memory request. This is a slow operation because the former has to acquire the lock in order to merge with the latter, so it is better to avoid such situations.</p>
                        <h3>Frontend: handling large objects</h3>
                        <p>Large objects are mainly cached in the global heap that is segregated similarly to the small objects' storage, using different storage bins to allocate objects of different sizes. This approach enables working with different bins in parallel. However, concurrent access to the same bin is protected by internal mutual exclusion primitive. To keep the size of an allocated data structure and an internal fragmentation in check, two types of cache exist – large and huge, which only differ in size of bins. Each bin holds a LIFO list of cached objects in order to keep the object that is hot in cache on the top. By default, this cache is not limitless and to keep the memory consumption decent, the library cleans up the cache from time to time.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/allocation3.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 3. Memory allocation for large objects</strong></p>
                        <p>&nbsp;</p>
                        <h3>Backend: overall structure</h3>
                        <p>The goal of the backend is to reduce the number of expensive calls to the OS serving the needs of the frontend while also avoiding significant fragmentation.</p>
                        <p>How is this achieved? On each memory request, the backend maps a bigger memory region than requested with a certain granularity, no less than a memory page. Then it splits the needed memory block according to the requested size, which may become a slab or a large object as shown in <strong>Figure 4</strong>. The last remaining block can be split for another request from the frontend and so on. Fragmentation here is controlled by three blocks coalescing: a block itself, its left neighbor, and its right neighbor. Each memory block has a lock containing its size.</p>
                        <div class="my-5">
                            <img src="../img/rushita_img/allocation4.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 4. Backend structure</strong></p>
                        <p>There is no shared state between a region and a block—they are unaware of each other, which improves scalability. We can thus split and coalesce memory chunks with no caching. However, very large objects are mapped and unmapped directly from the OS so as not to split them into pieces. There are two types of memory region: splittable and single as shown in <strong>Figure 4</strong>.</p>
                        <h3>oneTBB memory allocator templates<a class="inpage-nav-anchor" id="inpage-nav-1-4"></a></h3>
                        <p>Among several oneTBB memory allocator templates resembling the STL class <span class="code-simple">std::allocator</span>, <span class="code-simple">scalable_allocator&lt;T&gt;</span>, and <span class="code-simple">cache_aligned_allocator&lt;T&gt;</span> resolve the critical issues of scalability and false sharing (i.e., two threads attempting to access different words that share the same cache line), respectively, in a concurrent environment.</p>
                        <p>The <span class="code-simple">scalable_allocator&lt;T&gt;</span> requires only the oneTBB scalable memory <span class="code-simple">std::allocator</span> and can be leveraged independently in absence of any other components of oneTBB.</p>
                        <p>The <span class="code-simple">tbb_allocator&lt;T&gt;</span> and&nbsp; <span class="code-simple">cache_aligned_allocator&lt;T&gt;</span> templates use the scalable memory allocator by default but if it is unavailable, they use the standard C memory allocation methods: malloc and free.</p>
                        <h3>oneTBB memory allocator configuration<a class="inpage-nav-anchor" id="inpage-nav-1-5"></a></h3>
                        <p>oneTBB memory allocator is a general-purpose allocator, but you can alter its behavior using the following API functions:</p>
                        <ul>
                            <li>&nbsp;<span class="code-simple">scalable_allocation_mode():</span> You can set certain memory allocator parameters such as a heap size using this function. The defined parameters remain in effect until another call is made to the function.</li>
                            <li><span class="code-simple">scalable_allocation_command():</span> This function enables performing cleaning operations of the per-thread as well as the global memory buffers.</li>
                        </ul>
                        <p>You can also configure the allocator using a few environment variables as follows. However, <span class="code-simple">scalable_allocation_mode()&nbsp;</span>always gets priority over the environment variables.</p>
                        <ul>
                            <li><span class="code-simple">TBB_MALLOC_USE_HUGE_PAGES</span> instructs the allocator to use huge pages if enabled by OS.</li>
                            <li><span class="code-simple">TBB_MALLOC_USE_HUGE_OBJECT_THRESHOLD</span> defines the lower bound threshold (size in bytes) for allocations that are not released back to OS unless a cleanup is explicitly requested.</li>
                        </ul>
                        <h3>Scalable memory-pool feature<a class="inpage-nav-anchor" id="inpage-nav-1-6"></a></h3>
                        <p>The memory-pool feature of oneTBB allocator allows users to provide their own memory for thread-safe management by the allocator and group different memory objects under specific pool instances. It enables quick deallocation of all the memory, less memory fragmentation, and synchronization between independent groups of memory objects.</p>
                        <p class="k_plink1 k_intext1blue1">The memory pool mainly consists of two classes for thread-safe memory management: <span class="code-simple">tbb::fixed_pool</span> and <span class="code-simple">tbb::memory_pool</span>. Both utilize a user-specified memory provider. However, the first one is for allocating memory block(s) to small objects while the second one can grow on-demand and relinquish. A class called <span class="code-simple">tbb::memory_pool_allocator</span> allows memory-pool usage inside an STL container. See detailed information on <a href="#">scalable memory pools</a>.</p>
                        <h3>Memory API replacement library<a class="inpage-nav-anchor" id="inpage-nav-1-7"></a></h3>
                        <p class="k_plink1 k_intext1blue1">The easiest way of using the oneTBB allocator without even explicit usage of C/C++ API interface is to link your application with the memory-replacement API library called <span class="code-simple">tbbmalloc_proxy</span>. Using this, you can automatically replace all calls with the standard functions for dynamic memory allocation with a oneTBB scalable equivalent. Here is a detailed description of <a href="#">using dynamic memory allocation</a> on Windows and Linux.</p>

                        <h2 class="fw-light mt-5">Wrap-up</h2>
                        <p class="k_plink1 k_intext1blue1">With oneTBB memory allocator, you can efficiently handle memory allocation in your C++ applications, be it in a concurrent or a non-concurrent environment. <a href="#">Get started with oneTBB</a> to leverage its memory allocator and several other amazing features such as concurrent containers for performant threading experience. Get oneTBB as a part of the <a href="#">Intel® oneAPI Base Toolkit</a> or download the <a href="#">stand-alone version</a> of the library today!</p>
                        <h3>Useful resources<a class="inpage-nav-anchor" id="inpage-nav-2-undefined"></a></h3>
                        <ul>
                            <li class="k_plink1 k_intext1blue1"><a href="#">oneTBB memory allocation guide</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">oneTBB official page</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">oneTBB GitHub repo</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">Intel® oneAPI Base Toolkit</a></li>
                        </ul>
                        <h3>Acknowledgements<a class="inpage-nav-anchor" id="inpage-nav-2-1"></a></h3>
                        <p>We would like to thank Chandan Damannagari, Rob Mueller-Albrecht, Alexandr Konovalov, Piotr Balcer, Krzysztof Filipek, Ekaterina Semenova and Lukasz Plewa for their contributions to this blog.</p>
                    </div>
                </div>
    </section>
    <section class="my-4" style="font-size: 13px;">
        <div class="k_container11">
            <div class="row">
                <div>
                    <hr class="mb-5">
                    <p>Product and Performance Information </p>
                    <div class="k_plink1 k_intext1blue1"><sup>1</sup>Performance varies by use, configuration and other
                        factors. Learn more at &nbsp;<a href="#">www.Intel.com/PerformanceIndex.</a>.
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div id="footer"></div>
    <script>
        // navbar include  
        fetch('../y_index/y_navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
        // footer include 
        fetch('../y_index/y_footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script src="../js/jquery-3.7.1.js"></script>

    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/rushita.js"></script>
</body>

</html>