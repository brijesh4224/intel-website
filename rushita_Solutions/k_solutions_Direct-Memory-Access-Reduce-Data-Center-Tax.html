<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Memory Access: Reduce the Data Center Tax</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <link href=" https://fonts.cdnfonts.com/css/intel-clear " rel="stylesheet">
    <link rel="stylesheet" href="../css/owl.carousel.min.css">
    <link rel="stylesheet" href="../css/yatri.css">
    <link rel="stylesheet" href="../css/rushita.css">
    <link rel="stylesheet" href="../css/rushita_automotive.css">

    <link rel="stylesheet" href="../css/owl.theme.default.min.css">
    <style>
        * {
            font-family: 'Intel Clear', sans-serif;
        }

        .dk_new_options_table {
            border: none !important;
            justify-content: center !important;
            text-align: center !important;
        }

        .dk_new_options_table thead tr td {
            margin-left: 0;
            max-width: fit-content;
            white-space: normal;
            overflow: auto;
            background: #fff;
            padding: 1rem;
            text-align: left;
            border-left: .125rem solid #e2e2e2;
            font-weight: 700 !important;
        }

        .dk_new_options_table thead tr:nth-child(even) td {
            background-color: #f7f7f7;
        }

        .mv_intel_amx h2 {
            font-weight: 300;
        }

        .mv_intel_amx {
            font-size: 1.25rem;
        }

        .mv_intel_amx_bg_color {
            background-color: #0068B5;
        }

        .mv_intel_amx_content {
            padding-right: 200px;
        }

        .mv_intel_amx_item {
            align-content: center;
        }

        .mv_intel_amx {
            color: #fff;
            padding: 1rem;
        }

        .mv_intel_amx h3 {
            font-weight: 300;
        }

        .mv_intel_amx p {
            margin-top: 1.5rem;
            margin-bottom: 0rem;
        }

        .mv_intel_amx_image {
            padding: 1rem;
        }

        .mv_intel_amx_image img {
            width: 100%;
            /* height: 199px; */
        }

        .mv_intel_amx_heading_text {
            font-size: 1.2rem;
            line-height: 1.15;
        }

        .VK_sidebar_active_link {
            color: #262626;
            font-weight: 700;
        }

        .VK_sidebar_active_link:hover {
            color: #262626;
        }

        .VK_print_email_font span {
            font-size: 1.375rem;
        }

        .VK_side_bar_postion_stickey {
            position: sticky;
            top: 0px;
            z-index: 3;
            background-color: #fff;
        }

        .VK_side_heading {
            font-size: 26px;
            font-weight: 400;
        }

        .VK_sidebar_dropdown P {
            margin-left: .313rem !important;
            margin-bottom: .313rem !important;
        }

        .VK_sidebar_dropdown details {
            margin-left: .313rem !important;
            margin-bottom: .313rem !important;
        }
        code {
    color: #000 !important;
    background-color: #E6E6E6;
}
.k_btn{
    height: 80px;
}
.code-simple{
    background-color: #E6E6E6;
}
    </style>
</head>

<body>
    <div id="navbar"></div>

    <section class="m_ai_tdrop">
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Developers
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Zone.html">Overview</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Control-flow-Enforcement_Technology.html">Topics
                        & Technologies</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Development-Tools.html">Tools</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_in_Viewall_SDF_Industrial-Automation_Hardware-Platforms.html">Hardware
                        Platforms</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Resource-Documentation-Center.html">Resources &
                        Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Learn.html">Learn</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Communities-and-Events.html">Community & Events</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../dhruvin_developer-tools/ds_Developer-Programs.html">Developer Programs</a></li>
                <li><a class="dropdown-item m_dropActive" href="../dhruvin_developer-tools/ds_Get-Help.html">Get
                        Help</a></li>
            </ul>
        </div>


        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tools
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="../Product/B20_developer_catelog.html">Software
                        Catalog</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B17_oneapi.html">oneAPI</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Tiber™Edge-Platform.html">Intel® Tiber™ Edge
                        Platform</a></li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B10_intel_Quarts.html">FPGA</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_technology_sdk.html">Intel®
                        Active Management Technology SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_intel_adviser.html">Intel®
                        Advisor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® AI Reference Models</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Collaboration-Suite-for-WebRTC.html">Intel®
                        Collaboration Suite for WebRTC SDK</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="../Product/B1_19_Intel_AICloud.html">Intel® Tiber™
                        AI Cloud</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-Python.html">Intel® Distribution
                        for Python*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Distribution-for-GDB.html">Intel® Distribution for
                        GDB*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® DPC++ Compatibility Tool</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Dynamic Application Loader</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Topics_viewall_Cloud-Insider-Program_AI-Frameworks-and-Tools.html">Frameworks</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Embree</a></li>
                <li><a class="dropdown-item m_dropActive" href="../VK_developers/VK_ai_scikit.html">Intel® Extension
                        for Scikit-learn*</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Fortran-Compiler.html">Intel® Fortran Compiler</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Graphics Performance Analyzers</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-HE-Toolkit.html">Intel® Homomorphic Encryption
                        Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-In-Band-Manageability.html">Intel® In-Band
                        Manageability</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Cryptography-Primitives-Library.html">Intel®
                        Integrated Performance Primitives</a></li>
                <li><a class="dropdown-item m_dropActive" href="../rushita_Solutions/">Intel® Integrated Simulation
                        Infrastructure with
                        Modeling</a></li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Instruction-Set-Architecture(ISA)Extensions.html">Instruction
                        Set Architecture (ISA) Extensions</a>
                </li>
                <li><a class="dropdown-item m_dropActive"
                        href="../rushita_Solutions/k_solutions_Intel-Intelligent-Storage-Acceleration-Library.html">Intel®
                        Intelligent Storage Acceleration Library
                        (Intel® ISA-L)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Modin*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® MPI Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Neural Compressor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenCL™ Runtime</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Image Denoise</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Path Guiding Library (Intel® Open
                        PGL)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Pin</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Platform Analysis Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Software</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Applications</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OpenSWR</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenVINO™ Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Volume Kernel Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Optimization for XGBoost*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay for Hydra*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay Studio</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">PyTorch* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">TensorFlow* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Rendering Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Smart Edge Open</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Guard Extensions</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Secure Device Onboard</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Development Emulator</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Trust Domain Extensions (Intel® TDX)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Quantum SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Query Processing Library (Intel® QPL)</a>
                </li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Video Processing Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® VTune™ Profiler</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Resellers</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                oneAPI
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Overview</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Data Parallel C++/SYCL*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Toolkits</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Tech Articles & How-Tos</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Components</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Code Samples</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Training</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Support</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tech Articles & How-Tos
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">News Updates</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Webinars</a></li>
            </ul>
        </div>
        <div class="m_ai_shlash">/</div>
        <div class="m_ai_httl">Direct Memory Access: Reduce the Data Center Tax
        </div>
    </section>
    <section style="background-color: #0068B5;">
        <div class="k_container11">
            <div class="row  py-3">
                <div
                    class="col-lg-8 col-md-12 col-sm-12   mx-0 text-white align-content-center  k_tstartauto k_text2  px-0 mx-0 k_mdorder2 ">
                    <h3 class="fs3 mb-2 fw-lighter k_marketsmall">Beyond Direct Memory Access: Reducing the Data Center Tax with Intel Data Streaming Accelerator</h3>
                    <p class=" fs-5 k_md-small">Take Advantage of On-Chip Acceleration of Data Transformation in 4th Gen Intel® Xeon® Scalable Processors
                    </p>
                    
                </div>
                <div class="col-lg-3 col-md-12 col-sm-12 k_mdimg  k_mdorder1">
                    <img src="../img/rushita_img/universe.webp" alt="" width="100%">
                </div>
            </div>
        </div>
    </section>
    <section class="k_space k_spacenone">
        <div class="k_container11">
            <div class="row  g-3">
                <div class="float-end k_bignone" style="padding-left:70%;">
                    <div>
                        <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                        <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                    </div>
                </div>
                <div class="col-lg-3 col-md-4 col-sm-12">
                    <div class="VK_sticky_side_bar VK_side_bar_postion_stickey">
                        <div>
                            <div class="VK_sidebar_dropdown">
                                <ul class="k_listnone k_menu ">
                                    <li class="k_text"><a href="#section1">Intel® Data Streaming Accelerator</a></li>
                                    <li class="k_text"><a href="#section2">Operating Intel DSA</a></li>
                                    
                                    <li class="k_text"><a href="#section3">Take Advantage of Intel DSA with Software Libraries</a></li>
                                    <li class="k_text"><a href="#section4">Make the Most Out of Intel DSA</a></li>
                                    <li class="k_text"><a href="#section5">Keep a Balanced Batch Size and Transfer Size</a></li>
                                    <li class="k_text"><a href="#section6">Use Intel DSA Asynchronously When Possible</a></li>
                                    <li class="k_text"><a href="#section7">Control the Data Destination Wisely</a></li>
                                    <li class="k_text"><a href="#section8">Intel DSA as a Good Candidate of Moving Data across</a></li>
                                    <li class="k_text"><a href="#section9">a Heterogeneous Memory System</a></li>
                                    <li class="k_text"><a href="#section10">Leverage Processing Engine-Level Parallelism</a></li>
                                    <li class="k_text"><a href="#section11">Optimize WQ Configuration</a></li>
                                    <li class="k_text"><a href="#section12">Conclusion</a></li>
                                    <li class="k_text"><a href="#section13">Additional Resources</a></li>
                                    
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div>
                      <p><b>
                        Get the Latest on All Things CODE</b></p>
                        <p class="text-center k_btnget py-2 k_under k_btn100 my-2 kcokbtn1024" style="width: 80px;">
                            <a href="#" class="text-white">Sign Up</a>
                        </p>
                        <p><b>Sanjay Kumar</b><i>, Principal Engineer<br>
                        </i><b>Reese Kuper</b><i>, Research Intern<br>
                        </i><b>Atul Kwatra</b><i>, Intel Fellow<br>
                        </i><b>Shibani Nataraja</b><i>, Product Manager<br>
                        </i><b>Narayan Ranganathan</b><i>, Principal Engineer<br>
                        </i><b>Nikhil Rao</b><i>, Research Scientist<br>
                        </i><b>Rajesh Sankaran</b><i>, Intel Senior Fellow<br>
                        </i><b>Ren Wang</b><i>, Research Scientist<br>
                        </i><b>Yifan Yuan</b><i>, Research Scientist</i></p>
                        <p>Intel Corporation</p>
                    </div>
                </div>
                <div class="col-lg-8 col-md-7 col-sm-12  k_16smpx k_width75">
                    <div class="float-end mx-3 k_smnone">
                        <div>
                            <a href="#" class="fs-4"><i class="fa-solid fa-print mx-3 k_icon0"></i></a>
                            <a href="#" class="fs-4"> <i class="fa-regular fa-envelope k_icon0"></i></a>
                        </div>
                    </div>
                    <div class=" k_smpaddnone k_smpaddnone1 pt-5">
                        <p class="k_plink1 k_intext1blue1">In modern data centers, we have seen a wide range of applications involving intensive memory operations and transformations, such as <span class="code-simple">memcpy()</span>, <span class="code-simple">memmove()</span>, hashing, and compression. These applications include, but are not limited to, database, image processing and video transport, and graph processing. In addition, such memory operations and transformations are also common in a data center’s infrastructure software, consuming a significant amount of CPU cycles. This is also known as the “<a href="#">data center tax</a>” because these cycles could have been used to run applications. Ideally, such operations should be offloaded to optimized hardware engines.</p>
                        <h2 class="fw-light mt-5">Intel® Data Streaming Accelerator</h2>
                        <p>Intel Data Streaming Accelerator (Intel® DSA) is a high-performance data copy and transformation accelerator integrated in the latest 4<sup>th</sup> Generation Intel® Xeon® Scalable processors. It provides not only processing efficiency and practicality, but also versatility. Intel DSA is equipped with hardware components to efficiently process work descriptors submitted by one or more users. Through the support of shared virtual memory (SVM), these work descriptors can be submitted by user applications directly to Intel DSA via memory-mapped I/O (MMIO) registers, and the target memory regions are not required to be pinned in the operating system. Users are also allowed to directly configure the underlying computational resources based on their needs, which is enabled by the user interfaces provided by a set of dedicated drivers. In addition, Intel DSA provides better functionality by means of newly supported operations (<strong>Table 1</strong>). Therefore, it is expected that more user/kernel processes can take advantage of what Intel DSA offers.</p>
                        <div class="my-5 col-sm-12 col-md- m-auto">
                            <img src="../img/rushita_img/access.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Table 1</strong><strong>.</strong> <strong>Data streaming operations supported by Intel® DSA</strong></p>
                        <p>Intel® Data Accelerator Driver (IDXD) is a kernel mode driver for device initialization and management. It provides functionality for Intel DSA discovery, initialization, and configuration. Applications can leverage the user-space <span class="code-simple">libaccel-config</span> API library for such control operations. For the data path, to provide low-latency access to the Intel DSA instance for applications, IDXD exposes the MMIO portals as a char device via <span class="code-simple">mmap()</span>. Given all these new features and improvements, we see significant performance gains of Intel DSA over its software counterparts in multiple domains (<strong>Table 2</strong>) and on multiple operations, especially with medium-to-large data size (<strong>Figure 1</strong>).</p>
                        <div class="k_table-container">
                            <table class="k_tebal col-lg-8  col-md-8 col-sm-3  m-auto k_tspace">
                                <thead class="k_tebal text-center">
                                    <tr class="k_e2bg  k_tpadding1 k_tsmall">
                                        <th class=" k_cell-padding1 k_rightborder1 col-lg-4 col-md-3 col-1"><p><b>Area</b></p>
                                        </th>
                                        <th class="col-lg-4 col-md-2 col-1"><p><b>Example Applications and Operations</b></p>
                                       </th>
                                   
                                    </tr>
                                </thead>
                                <tbody class="k_tebal k_14px">
                                    <tr class="  k_rightborder1 k_tpadding1 k_tsmall">
                                        <td>
                                            <p class="k_plink1 k_intext1blue1">Networking stack acceleration</p>
                                           </td>
                                           <td>
                                           <p>DPDK, software virtual switch, video transport</p>
                                           </td>
                                    </tr>
                                    <tr class="k_tgrey k_rightborder1 k_tpadding1 k_tsmall">
                                        <td>
                                         <p>Storage stack acceleration</p>
                                        </td>
                                        <td>
                                        <p>SPDK, NVMe-oF, DAOS</p>
                                        </td>
                                       
                                    
                                    </tr>
                                    <tr class="  k_rightborder1 k_tpadding1 k_tsmall">
                                        <td>
                                            <p class="k_plink1 k_intext1blue1">Data center tax reduction</p>
                                           </td>
                                           <td>
                                           <p>	
                                            VM boot-up/migration, memory compaction</p>
                                           </td>
                                    </tr>
                                    <tr class="k_tgrey  k_rightborder1 k_tpadding1 k_tsmall">
                                        <td>
                                            <p class="k_plink1 k_intext1blue1">HPC/ML acceleration</p>
                                           </td>
                                           <td>
                                           <p>Memory movement/zeroing in libfabric/MPI</p>
                                           </td>
                                    </tr>
                                    <tr class="  k_rightborder1 k_tpadding1 k_tsmall">
                                        <td>
                                            <p class="k_plink1 k_intext1blue1">Heterogeneous memory management acceleration</p>
                                           </td>
                                           <td>
                                           <p>Page migration for CXL/Pmem-based tiered memory systems</p>
                                           </td>
                                    </tr>
                                </tbody>
                            </table>
                           
                        </div>
                        <p class="utility-text-1" style="text-align:center"><em><strong>Table </strong><strong>2</strong><strong>.</strong> <strong>Potential Intel® DSA usage in multiple domains</strong></em></p>
                        <div class="my-5 col-sm-12 col-md-9 m-auto">
                            <img src="../img/rushita_img/access1.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 1</strong><strong>.</strong> <strong>Throughput improvements of data streaming operations over their software counterparts with varying transfer sizes (batch size: 1); </strong><span class="code-simple"><strong>Memory Fill</strong></span><strong> and </strong><span class="code-simple"><strong>NT-Memory Fill</strong></span><strong> refer to allocating and non-allocating writes (similar to regular </strong><span class="code-simple"><strong>store</strong></span><strong> and </strong><strong><span class="code-simple">nt-store</span>), respectively</strong></p>

                        <h2 class="fw-light mt-5">Operating Intel DSA</h2>
                        <p>Like other accelerators, Intel DSA employs descriptors and work queues (WQ) to interact with the CPU software (<strong>Figure 2</strong>).</p>
                        <div class="my-5 col-sm-12 col-md-9 m-auto">
                            <img src="../img/rushita_img/access3.png" alt="" width="100%" height="500px">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 2</strong><strong>.</strong> <strong>Descriptor processing sequence</strong></p>
                        <p>Data movement is the most common use-case of Intel DSA, so we will use a data-copy example to demonstrate usage. Suppose in a key-value store application, where we have large key-value pair size, every time we retrieve or update the value of a given key, memory copy will happen and incur lots of CPU cycles. We would rather offload these operations to Intel DSA. Assuming the Intel DSA instance has been enumerated and configured by tools like <span class="code-simple">accel-config</span>, the programmer first needs to allocate and fill the descriptor data structure (<strong>Figure 3</strong>). The descriptor contains information about the desired operation, such as operation type, source and destination address, data length, etc.</p>
                        <div class="my-5 col-sm-12 col-md-9 m-auto">
                            <img src="../img/rushita_img/access4.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 3</strong><strong>.</strong> <strong>Descriptor initialization</strong></p>
                        <p>Having the descriptor ready, the next step for the programmer is to submit the descriptor to a WQ opened and mapped in the current program. Depending on the WQ type, the software may use either the ENQCMD or MOVDIR64B instruction for descriptor submission. Both instructions are supported in GNU GCC (version 10 and later), and the programmer can use the x86 intrinsics to call them (<strong>Figure 4</strong>).</p>
                        <div class="my-5 col-sm-12 col-md-8 m-auto">
                            <img src="../img/rushita_img/access5.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 4</strong><strong>.</strong> <strong>Descriptor submission</strong></p>
                        <p class="k_plink1 k_intext1blue1">To check the completion of the descriptor, the programmer needs to poll the status field of the completion record, which will be updated by Intel DSA. The most common way of doing this is spin-polling (<strong>Figure 5</strong>). New instructions, like PAUSE and UMONITOR/UMWAIT, can be applied to further reduce the processor’s power consumption, as the core can enter a different power state with such instructions. (See the <a href="#">Intel® 64 and IA-32 Architectures Software Developer Manuals</a> for more information.)</p>
                        <div class="my-5 col-sm-12 col-md-8 m-auto">
                            <img src="../img/rushita_img/access6.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 5</strong><strong>.</strong> <strong>Checking descriptor completion</strong></p>

                        <h2 class="fw-light mt-5">Take Advantage of Intel DSA with Software Libraries</h2>
                        <p class="k_plink1 k_intext1blue1">The Intel® Data Mover Library (Intel® DML) and Intel® DSA Transparent Offload Library (Intel® DTO) make Intel DSA easier to use. Intel DML provides a set of high-level C/C++ APIs for data movement and transformation, calling the underlying Intel DSA unit when available. It supports advanced capabilities (all Intel DSA hardware operations, asynchronous offload, load balancing, etc.). Intel DML v1.0.0 is available on <a href="#">GitHub</a>. After cloning the repository and installing the required packages, it can be compiled and installed by simple CMake commands (see the <a href="#">Intel DML Documentation</a> for more installation options):</p>
                        <div class="my-5 col-sm-12 col-md-8 m-auto">
                            <img src="../img/rushita_img/access7.png" alt="" width="100%">
                        </div>
                        <p><strong>Figure 6</strong> demonstrates basic usage of Intel DML. While the basic steps remain unchanged, more details are hidden by Intel DML APIs and abstraction. Continuing the example of key-value store application, instead of manually preparing and submitting the descriptor, the programmer can call Intel DML so that the designated memory copy is offloaded to Intel DSA.</p>
                        <div class="my-5 col-sm-12 col-md-8 m-auto">
                            <img src="../img/rushita_img/access8.png" alt="" width="100%">
                        </div>
                        <p class="utility-text-1" style="text-align:center"><strong>Figure 6</strong><strong>.</strong> <strong>Example of basic data movement with Intel® DML</strong></p>
                        <p>Intel DTO is a less-intrusive library that allows the application to leverage Intel DSA transparently without source code modification. Users can either dynamically link the library using the <span class="code-simple">‑ldto</span> and <span class="code-simple">‑laccel‑config</span> linker options or preload the library via <span class="code-simple">LD_PRELOAD</span> without having to recompile their application. When common system API calls like <span class="code-simple">memmove()</span>, <span class="code-simple">memcpy()</span>, <span class="code-simple">memset()</span>, or <span class="code-simple">memcmp()</span> are used, they are intercepted and replaced by Intel DTO functions to access the corresponding synchronous Intel DSA operations.</p>
                        <p>In addition to Intel DML and Intel DTO, which are general-purpose libraries, there are also domain-specific software libraries that take advantage of Intel DSA. For example, in the Data Plane Development Kit (DPDK) for high-performance kernel-bypass network programming, Intel DSA, along with DMA engines from other vendors, has been abstracted and wrapped in the <strong>dmadev </strong>library. Users can call the corresponding APIs to offload network packets copying to Intel DSA instances. Similarly, the Storage Performance Development Kit (SPDK) has Intel DSA support in its /lib/accel library to support various operations offloading. Intel DSA has also been enabled in HPC libraries, such as libfabric and MPI, which are used in not only traditional scientific computing workloads, but also emerging distributed ML/AI applications.</p>
                        <h2 class="fw-light mt-5">Make the Most Out of Intel DSA</h2>
                        <p class="k_plink1 k_intext1blue1">As an on-chip accelerator for streaming data, Intel DSA benefits from proper tuning of the programming models for optimal performance. Based on our experiences, we summarize a number of guidelines and recommendations for using Intel DSA. (See this <a href="#">technical report</a> for more details.)</p>
                        <h2 class="fw-light mt-5">Keep a Balanced Batch Size and Transfer Size</h2>
                        <p>Offloading work of a certain size to Intel DSA can be done using either one descriptor for the full memory region or batching multiple smaller descriptors for the same aggregate size. The general trend indicates a decrease in throughput when using larger batches for the same offloaded work. As individual descriptors must be processed internally in Intel DSA and read the corresponding data from memory, the additional overhead for managing the increased number of descriptors may reduce the effective throughput achieved from these operations. If the desired data for offloading is contiguous, coalescing into a larger, single descriptor of the equivalent size may improve both throughput and latency.</p>
                        <p>When offloading synchronously, a weak pattern emerges, showing an optimum point in throughput between maximizing batches and maximizing transfer size. Modestly batching the work (4-8 descriptors) yields the best results. This is due to balancing the latency from fetching sequential regions of memory and processing batched descriptors.</p>
                        <h2 class="fw-light mt-5">Use Intel DSA Asynchronously When Possible</h2>
                        <p>Offloading operations to Intel DSA in an asynchronous manner provides optimal efficiency and performance for both the CPU core and Intel DSA hardware. This can use Intel DML for easy implementation. When limited in asynchronous potential, transfer sizes below 4 KB should be used on the CPU core if cache pollution is acceptable. As an on-chip accelerator, Intel DSA brings more options to interact with the cache and (heterogeneous) memory hierarchy.</p>
                        <h2 class="fw-light mt-5">Control the Data Destination Wisely</h2>
                        <p>Unlike the completion record that is always directed to the LLC, data written to the destination address of a descriptor can be steered either to the LLC or to the main memory. Intel DSA facilitates this cache control feature by allowing users to provide a hint (i.e., setting the cache control flag of a work descriptor) that notes the preferred destination. If the flag is set to 0, the data is written to the memory while invalidating the corresponding cache lines in the LLC, if any. If the flag is set to 1, the data is directly written to the LLC by allocating the corresponding cache lines. The underlying principle of this technique is identical to that of Intel® Data Direct I/O Technology (Intel® DDIO), a direct cache access (DCA) scheme leveraging the LLC as the intermediate buffer between the processor and I/O devices. In general, DDIO improves system performance by reducing the data access latency and reducing memory bandwidth pressure. However, one should be careful when using this feature because it can sometimes cause interference in the LLC.</p>
                        <p>Cache pollution negatively affects processes that share limited hardware resources. In many data center workloads, the latency gained from antagonistic background cache evictions may undermine the competitive service level agreements (SLAs) set for the primary applications. On the other hand, writing data that is either critical to performance or used by the core in the near future directly to the cache will provide an access latency and throughput advantage for the application. The programmer should wisely choose the data destination based on the application behavior.</p>
                        <h2 class="fw-light mt-5">Intel DSA as a Good Candidate of Moving Data across a Heterogeneous Memory System</h2>
                        <p>Moving data to/from different memory mediums, such as&nbsp;NUMA&nbsp;remote memory, persistent memory, and CXL-based memory, is common in modern tiered memory systems. Intel DSA offers a high degree of configuration flexibility through the available hardware resources. Taking advantage of such configurations can yield optimal Intel DSA hardware utilization, and thus better performance.</p>

                        <h2 class="fw-light mt-5">Leverage Processing Engine-Level Parallelism</h2>
                        <p>The number of processing engines used in a group can impact the maximum observed throughput. Increasing the number of processing engines per group improves throughput. Users should be aware of the common transfer size of offloaded tasks to these groups as smaller transfer sizes yield greater performance scaling.</p>

                        <h2 class="fw-light mt-5">Optimize WQ Configuration</h2>
                        <p>Using batching or dedicated WQs (DWQs) provides greater benefits compared to a shared WQ (SWQ). Unless the shared WQ is used by many other threads, greater utilization and throughput can be achieved through reconfiguring to using more DWQs. SWQs may perform worse when few threads are used, but can outperform all configurations when using more threads than the total number of WQs, as that offloads concurrency management to hardware. Additionally, WQs can be configured to either shared or dedicated for providing performance isolation between WQs within a group. As Intel DSA has limited WQ entries, assigning 32 entries for a single WQ can provide almost the maximum throughput possible.</p>

                        <h2 class="fw-light mt-5">Conclusion</h2>
                        <p>Intel DSA, as well as other on-chip accelerators appearing in the 4<sup>th</sup> Generation Intel Xeon Scalable processors, has the potential to reduce the data center tax and total cost of ownership. This article provides a high-level overview of Intel DSA and its fundamental usages, as well as several guidelines to make the most out of this accelerator. With a growing software ecosystem, we believe Intel DSA will be adopted for many data center workloads. Intel, in active collaboration with the open-source community, has been building and enabling this ecosystem.</p>

                        <h2 class="fw-light mt-5">Additional Resources</h2>
                        <ul>
                            <li class="k_plink1 k_intext1blue1"><a href="#">Introducing the Intel Data Streaming Accelerator (Intel DSA)</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">Intel Data Streaming Accelerator Architecture Specification</a> [PDF]</li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">Intel Data Streaming Accelerator User Guide</a> [PDF]</li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">Intel DSA Performance Micros</a></li>
                            <li class="k_plink1 k_intext1blue1"><a href="#">Intel Data Mover Library (Intel DML)</a></li>
                        </ul>
                    </div>
                </div>
            </div>
    </section>
    <section class="mt-5">
        <div class="k_container11">
            <div class="row">
                <div>
                    <h2 class="fw-light">The Parallel Universe Magazine - Issue #53</h2>
                    <P>Intel’s quarterly magazine for software innovation helps you take your software development into the future with the latest tools, tips, and training to expand your expertise.  </P>
                </div>
                <div class="row k_space ">
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text k_gutter">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="../rushita_Solutions/k_solutions_Direct-Memory-Access-Reduce-Data-Center-Tax.html">
                                Beyond Direct Memory Access: Reducing the Data Center Tax with Intel Data Streaming Accelerator
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text k_gutter">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="#">
                                Cultivate Parallel Standards: Diversity, Alignment, and Cross-Pollination
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text k_gutter">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="../rushita_Solutions/k_solutions_Minimizing-the-Risks-Generative-AI.html">
                                The Moat Is Trust or Maybe Just Responsible AI
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="#">
                                Create Your Own Custom Chatbot
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="#">
                                Fine-Tune the Falcon 7 Billion Parameter Model with Hugging Face* and oneAPI
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="../rushita_Solutions/k_solutions_Use-Fortran-DO-CONCURRENT-for-Accelerator-Offload.html">
                                Using Fortran DO CONCURRENT for Accelerator Offload
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="#">
                                Performance Optimization on Intel Processors with High-Bandwidth Memory
                            </a>
                        </div>
                    </div>
                    <div class="col-sm-12 col-md-6 col-lg-4 mb-4 k_laptop k_text">
                        <div class="k_btn k_resoursebtn k_xeonbtn p-3 k_btngrey">
                            <a href="#">
                                Check out the Latest Issue
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="my-4" style="font-size: 13px;">
        <div class="k_container11">
            <div class="row">
                <div>
                    <hr class="mb-5">
                    <p>Product and Performance Information </p>
                    <div class="k_plink1 k_intext1blue1"><sup>1</sup>Performance varies by use, configuration and other
                        factors. Learn more at &nbsp;<a href="#">www.Intel.com/PerformanceIndex.</a>.
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div id="footer"></div>
    <script>
        // navbar include  
        fetch('../y_index/y_navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
        // footer include 
        fetch('../y_index/y_footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js"></script>
    <script src="../js/jquery-3.7.1.js"></script>

    <script src="../js/owl.carousel.min.js"></script>
    <script src="../js/rushita.js"></script>
</body>

</html>