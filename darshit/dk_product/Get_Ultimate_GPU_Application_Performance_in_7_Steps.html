<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>7 Steps to Ultimate GPU Application Performance</title>

    <!-- font family -->
    <link href="https://fonts.cdnfonts.com/css/intel-clear" rel="stylesheet">
    <link rel="stylesheet" href="/css/dk_arria_10_FPGA_developer_center.css">
    <link rel="stylesheet"href="/css/dk_developer_edge_iot_5G_industrial_automation_see_all_Intelligent_connection_management_for_automated_handover.css">
    <link rel="stylesheet"href="/css/dk_developer_edge_iot_&_5G_optimize_fine_tuning_and_deployment_of_LLMs_on_an_ai_pc.css">
    <link rel="stylesheet" href="/css/rushita_automotive.css">
    <!-- header footer -->
    <link rel="stylesheet" href='/css/yatri.css'>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet">

</head>

<style>
    .dk_color1{
        color: #069 !important;
        font-weight: 700 !important;
    }
    .dk_color2{
        color: #b24501;
    }
    /****** Device Information ******/
        .mv_deploy_nav_tab{
            background-color: #fff;
        }
        .mv_deploy_nav_pills{
            border-bottom: 1px solid #E6E6E6;
            flex-wrap: nowrap !important;
            overflow-x: auto !important;
            width: 100% !important;
        }
        .mv_deploy_nav_link {
            color: #0068b5 !important;
        }
        .mv_deploy_nav_pills .mv_deploy_nav_link{
            background-color: #fff !important;
            text-wrap: nowrap !important;
        }
        .mv_deploy_nav_pills .mv_deploy_nav_link.active{
            border-radius: 0rem !important;
            color: #0068b5 !important;
            border-bottom: 4px solid #00aeef;
            background-color: #F2F2F2 !important;
        }
        .mv_deploy_nav_pills .mv_deploy_nav_link:hover{
            border-radius: 0rem;
            background-color: #F2F2F2 !important;
        }
        .mv_gpu_flex_padd{
            padding: 3rem 0rem;
        }
        .mv_gpu_flex{
            align-content: center;
        }
        .mv_gpu_flex h1{
            font-weight: 350;
        }
        .mv_gpu_flex p{
            margin-bottom: .5rem;
        }
        .mv_gpu_flex p a{
            color: #0068b5;
            border-bottom: 1px dashed #0068b5;
        }
        .mv_gpu_flex p a:hover{
            border-bottom: 1px solid #0068b5;
        }
        .mv_gpu_flex_img img{
            width: 100%;
        }
        .mv_enable_boundless_padd{
            padding: 3rem 0rem;
        }
        .mv_enable_img img{
            width: 100%;
            margin-bottom: 10px;
        }
    @media(max-width:768px){
        .mv_product_table{
            width: 100% !important;
        }
    }
</style>

<body>
    <!-- header -->
    <div id="navbar"></div>

    <!-------------------------------------------------------------------------->
    <section class="m_ai_tdrop" style="border-bottom: 1px solid rgb(226, 221, 221);">
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Developers
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Overview</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Topics & Technologies</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Tools</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Resources & Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Learn</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Community & Events</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Developer Programs</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Get Help</a></li>
            </ul>
        </div>
    
        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tools
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Software Catalog</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">oneAPI</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Open Edge Platform</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">FPGA</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Active Management Technology SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Advisor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® AI Reference Models</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Collaboration Suite for WebRTC SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Tiber™ AI Cloud</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Distribution for Python*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Distribution for GDB*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® DPC++ Compatibility Tool</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Dynamic Application Loader</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Frameworks</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Embree</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Extension for Scikit-learn*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Fortran Compiler</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Graphics Performance Analyzers</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Homomorphic Encryption Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® In-Band Manageability</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Integrated Performance Primitives</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Integrated Simulation Infrastructure with Modeling</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Instruction Set Architecture (ISA) Extensions</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Intelligent Storage Acceleration Library (Intel® ISA-L)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Modin*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® MPI Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Neural Compressor</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenCL™ Runtime</a></li>   
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Image Denoise</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Path Guiding Library (Intel® Open PGL)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Pin</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Platform Analysis Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Software</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel Tools for OpenCL™ Applications</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OpenSWR</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">OpenVINO™ Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Open Volume Kernel Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Optimization for XGBoost*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay for Hydra*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® OSPRay Studio</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">PyTorch* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">TensorFlow* Optimizations from Intel</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Rendering Toolkit</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Smart Edge Open</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Guard Extensions</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Secure Device Onboard</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Software Development Emulator</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Quantum SDK</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Query Processing Library (Intel® QPL)</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® Video Processing Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Intel® VTune™ Profiler</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Resellers</a></li>
            </ul>
        </div>

        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                oneAPI
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Overview</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Data Parallel C++/SYCL*</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Toolkits</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Tech Articles & How-Tos</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Components</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Code Samples</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Training</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Documentation</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Support</a></li>
            </ul>
        </div>

        <div class="m_ai_shlash">/</div>
        <div>
            <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                Tech Articles & How-Tos
            </button>
            <ul class="dropdown-menu">
                <li><a class="dropdown-item m_dropActive" href="#">Library</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">News Updates</a></li>
                <li><a class="dropdown-item m_dropActive" href="#">Webinars</a></li>
            </ul>
        </div>

        <div class="m_ai_shlash">/</div>
        <div class="m_ai_httl">7 Steps to Ultimate GPU Application Performance</div>
    </section>
    <!-------------------------------------------------------------------------------------------------------->

    <!-- VMware Horizon -->
    <section>
        <div class="mv_vmware_bg_color">
            <div class="container">
                <div class="mv_vmware_padd">
                    <div class="row">
                        <div class="col-md-12 col-sm-12">
                            <div style="color: #fff;">
                                <h2 style="font-weight: 350; margin-bottom: 1.5rem;">Get Ultimate GPU Application Performance in 7 Steps</h1>
                                <h5>A Tutorial on GPU Profiling using Intel® VTune™ Profiler</h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="container py-5">
        <div class="row">
            <div class="d-flex justify-content-end col-xl-10 py-3 d-md-none">
                <i class="fa-solid fa-print fs-4 px-2 " style="color:#0068B5"></i>
                <i class="fa-regular fa-envelope fs-4 px-2" style="color:#0068B5"></i>
            </div>
            <div class="col-lg-3 col-md-4">
                <!-- nav -->
                <div class="VK_sticky_side_bar VK_side_bar_postion_stickey">
                    <div>
                        <div class="VK_sidebar_dropdown">
                            <details>
                                <summary>
                                    <a href="#dk_quick_overview" class="text-decoration-none VK_a">
                                        Quick Overview: What Is VTune™ Profiler?
                                    </a>
                                </summary>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <a href="#dk_key_features" class="text-decoration-none VK_a my-1">
                                            Key Features
                                        </a>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <a href="#dk_rich_set" class="text-decoration-none VK_a my-1">
                                            Rich Set of Profiling Capabilities
                                        </a>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <a href="#dk_command_line" class="text-decoration-none VK_a my-1">
                                            Command Line Options
                                        </a>
                                    </li>
                                </ul>
                            </details>
                            <details>
                                <summary>
                                    <a href="#dk_let_get_it" class="text-decoration-none VK_a">
                                        Let’s Get to It
                                    </a>
                                </summary>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <details>
                                            <summary>
                                                <a href="#dk_example_workflow" class="text-decoration-none VK_a">
                                                   Example Workflow: VTune Profiling on CPU and GPU in 7 Steps
                                                </a>
                                            </summary>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_step1_test" class="text-decoration-none VK_a my-1">
                                                        Step 1: Test Application; SYCL Implementation of iso3dfd
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_step2_run" class="text-decoration-none VK_a my-1">
                                                        Step 2: Run Application on CPU
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_vtune_profiler" class="text-decoration-none VK_a my-1">
                                                        VTune Profiler Command Line for Collecting and Reporting
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_run_vtune" class="text-decoration-none VK_a my-1">
                                                        Run VTune to Collect GPU-offload Analysis and Generate Report
                                                    </a>
                                                </li>
                                            </ul>
                                        </details>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <details>
                                            <summary>
                                                <a href="#dk_step3_run_offload" class="text-decoration-none VK_a">
                                                    Step 3: Run and Sample Application Using GPU Offload
                                                </a>
                                            </summary>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_command_line" class="text-decoration-none VK_a my-1">
                                                         a) Command Line for Running the Basic SYCL Implementation on GPU
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_vtune_command" class="text-decoration-none VK_a my-1">
                                                        b) VTune Command Line for Collecting and Reporting
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_run_vtune_collect" class="text-decoration-none VK_a my-1">
                                                        c) Run VTune to Collect GPU-Offload Analysis and Generate Report
                                                    </a>
                                                </li>
                                            </ul>
                                        </details>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <details>
                                            <summary>
                                                <a href="#dk_step4_gpu" class="text-decoration-none VK_a">
                                                    Step 4: GPU Optimization-1 (Linear Indexing)
                                                </a>
                                            </summary>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_command_implemen" class="text-decoration-none VK_a my-1">
                                                        a) Command Line for Running the Linear Indexed SYCL Implementation on GPU
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_vtune_collecting" class="text-decoration-none VK_a my-1">
                                                        b) VTune Command Line for Collecting and Reporting
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_run_vtune_collect" class="text-decoration-none VK_a my-1">
                                                        c) Run VTune to Collect Hotspots and Generate Report
                                                    </a>
                                                </li>
                                            </ul>
                                        </details>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <details>
                                            <summary>
                                                <a href="#dk_step5_private" class="text-decoration-none VK_a">
                                                    Step 5: Optimization-2_i (GPU Private Memory)
                                                </a>
                                            </summary>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_command_sycl" class="text-decoration-none VK_a my-1">
                                                        a) Command Line for Running the SYCL Private Memory Implementation on GPU
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_vtune_reporting" class="text-decoration-none VK_a my-1">
                                                        b) VTune Command Line for Collecting and Reporting
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_run_vtune_report" class="text-decoration-none VK_a my-1">
                                                        c) Run VTune to Collect Hotspots and Generate Report
                                                    </a>
                                                </li>
                                            </ul>
                                        </details>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <details>
                                            <summary>
                                                <a href="#dk_step6_memory" class="text-decoration-none VK_a">
                                                    Step 6: Optimization-2_k (GPU Private Memory)
                                                </a>
                                            </summary>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_command_private" class="text-decoration-none VK_a my-1">
                                                        a) Command Line for Running the SYCL Private Memory Implementation on GPU
                                                    </a>
                                                </li>
                                            </ul>
                                        </details>
                                    </li>
                                </ul>
                                <ul class="list-unstyled ps-3 mb-0">
                                    <li>
                                        <details>
                                            <summary>
                                                <a href="#dk_step7_memory" class="text-decoration-none VK_a">
                                                    Step 7: Optimization-3 (Shared Local Memory)
                                                </a>
                                            </summary>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_command_shared" class="text-decoration-none VK_a my-1">
                                                       a) Command Line for Running the SYCL Shared Local Memory Implementation on GPU
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_vtune_collecting" class="text-decoration-none VK_a my-1">
                                                        b) VTune Command Line for Collecting and Reporting
                                                    </a>
                                                </li>
                                            </ul>
                                            <ul class="list-unstyled ps-3 mb-0">
                                                <li>
                                                    <a href="#dk_run_hotspots" class="text-decoration-none VK_a my-1">
                                                        c) Run VTune to Collect Hotspots and Generate Report
                                                    </a>
                                                </li>
                                            </ul>
                                        </details>
                                    </li>
                                </ul>
                            </details>
                            <p class="m-0">
                                <a href="#dk_summary" class="text-decoration-none VK_a">
                                    Summary
                                </a>
                            </p>
                            <p class="m-0">
                                <a href="#dk_learn_more" class="text-decoration-none VK_a">
                                    Learn More
                                </a>
                            </p>
                            <p class="m-0">
                                <a href="#dk_get_software" class="text-decoration-none VK_a">
                                    Get the Software
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
                <!-- thinkcode -->
                <div class="dk_things_code_main">
                    <div class="dk_things_code">
                        <div class="dk_high_quality">
                            <p class="mb-4"><b>Get the Latest on All Things CODE</b></p>
                        </div>
                    <div class="dk_get_code">
                        <button class="dk_button">Sign Up</button>
                    </div>
                </div> 
                <div class="mt-3">
                    <p><b>Intel Corporation</b></p>
                    <p><i><b>Rupak Roy</b>, Technical Consulting Engineer; <a class="b_special_a2" href="">LinkedIn</a></i></p>
                    <p><i><b>Mohammad Zubair</b>, Professor, Old Dominion University; &nbsp;<a class="b_special_a2" href="">LinkedIn</a></i></p>
                    <p><i><b>Cory Levels</b>, Software Technical Consulting Engineer; <a class="b_special_a2" href="">LinkedIn</a></i></p>
                    <p><i><b>Xiao Zhu</b>, Software Technical Consulting Engineer; <a class="b_special_a2" href="">LinkedIn</a></i></p>
                    <p><i><b>Vladimir Tsymbal</b>, Development Tools Software Engineering Manager; <a class="b_special_a2" href="">LinkedIn</a></i></p>
                    <p><i><b>Mourad Bouache</b>, Product Marketing Engineer; <a class="b_special_a2" href="">LinkedIn</a></i>   &nbsp;</p>
                </div>
                </div>
            </div>
            <div class="col-lg-9 col-md-8">
                <div class="d-md-flex justify-content-end col-xl-10 py-3 d-none">
                    <i class="fa-solid fa-print fs-4 px-2 " style="color:#0068B5"></i>
                    <i class="fa-regular fa-envelope fs-4 px-2" style="color:#0068B5"></i>
                </div>
                <div class="col-xl-10 VK_all_sections">
                    <div style="padding-bottom: 16px;">
                        <p>&nbsp;</p>
                        <p>Following the Innovation 2022 session on Code Design and Optimization for Next Generation CPUs and Compute Accelerators with oneAPI Analysis Tools, our application optimization experts decided to dive deeper into the real world usage of the multiarchitecture performance profiling capabilities presented there.</p>
                        <p class="mb-0">This is a step-by-step journey that takes a real-world application and …</p>
                        <ol>
                            <li>Executes it first on the CPU,</li>
                            <li>Enables SYCL*-based GPU offload, and</li>
                            <li>Improves performance by applying findings and guidance from <a class="b_special_a1" href="">Intel® VTune™ Profiler</a>, an analysis tool for quickly finding and fixing bottlenecks in applications, systems, and system configurations (CPUs, GPUs, and other accelerators).</li>
                        </ol>
                        <p>We will set the baseline and then will illustrate the benefits in performance analysis you can reap from this comprehensive and powerful tool when it’s applied to workloads running on a GPU.</p>
                        <p>After reading this article, you will be ready to optimize your own heterogeneous application on both CPU and GPU.</p>
                        <p>Note that this tutorial will be done in the <a class="b_special_a1" href="">Intel® DevCloud</a> environment, a free cloud-base sandbox to learn about programming using Intel® oneAPI tools on the latest Intel® hardware.</p>
                        <p>&nbsp;</p>
                    </div>
                    <section id="dk_quick_overview">
                        <h3><strong>Quick Overview: What Is VTune™ Profiler?</strong></h2>
                        <p>It is a powerful analysis and optimization tool that helps locate software performance bottlenecks by collecting, analyzing, and displaying system-wide performance data down to the source level. It provides profiling capabilities for application performance, system performance, and system configuration for HPC, cloud, IoT, and more.</p>
                        <p class="mb-0">&nbsp;</p>
                    </section>
                    <section id="dk_key_features">
                        <h4><strong>Key Features</strong></h3>
                        <ul>
                            <li><strong>Analyze Source Code</strong>: Detect the loops/functions of source code that consume the most time and memory.&nbsp;</li>
                            <li><strong>Tune for CPU, GPU &amp; FPGA</strong>: Optimize for any supported hardware.&nbsp;</li>
                            <li><strong>Optimize Offload</strong>: Tune OpenMP*/SYCL offload performance.&nbsp;</li>
                            <li><strong>Wide Range of Performance Profiles</strong>: Parallelism, memory bottleneck, cache usage, core utilization, and more.&nbsp;</li>
                            <li><strong>Supported Languages:</strong> Includes most of the popular languages, e.g. SYCL, C, C++, Fortran, Python, Go, Java, or a mix.&nbsp;</li>
                        </ul>
                        <p class="mb-0">&nbsp;</p>
                    </section> 
                        <section id="dk_rich_set">
                            <h4><strong>Rich Set of Profiling Capabilities</strong></h4>
                            <p class="mb-0">Intel VTune Profiler helps design an efficient algorithm by:</p>
                            <ul>
                                <li>Locating the most time and memory-consuming part of your code.</li>
                                <li>Locating microarchitecture bottlenecks and identifying the most significant hardware issues and memory-access related issues.</li>
                                <li>Providing insights on how efficiently the code is threaded to increase parallelism.</li>
                                <li>Reporting how effectively the hardware processes I/O traffic for I/O intensive workloads.</li>
                                <li>Optimizing the offload schema and analyzing the code bottlenecks for accelerators.</li>
                            </ul>
                            <p>Additionally, VTune assists with profiling the system behavior of longer-running applications. <strong>Figure-1</strong> gives you a snapshot of all the workload performance aspects it touches on a given hardware platform.</p>
                            <p style="text-align:center"><img class="w-100" alt="" src="/img/darshit_image/f1-performance-snapshot-vtune.png" width="1439"></p>
                            <p class="utility-text-1" style="text-align:center">Figure-1: Platform Specific Workload Performance Characterization</p>
                            <p>As you can see, a complete performance profile for your workload can be established allowing you to determine exactly where to put your effort and how to take full advantage of your heterogeneous hardware setup.</p>
                            <p class="mb-0">&nbsp;</p>
                        </section>

                        <section id="dk_command_line">
                            <h4><strong>Command Line Options</strong></h4>
                            <p>Here’s a quick overview of VTune’s command line usage:</p>
                            <ol>
                                <li><strong>Run and Collect VTune Data</strong><br>
                                <br>
                                The common format of a VTune command line:<br>
                                <br>
                                <em>vtune -collect &lt;collectionType&gt; -knob &lt;knobName=knobValue&gt; -result-dir vtune_data&nbsp; [--] &lt;targetApplication&gt;</em><br>
                                <br>
                                Other options: <em>-search-dir=&lt;string&gt;, -source-search-dir=&lt;string&gt;, ...</em><br>
                                <br>
                                Various types of profiling data can be collected like <em>hotspots</em>, <em>memory-consumption</em>, <em>memory-access</em>, <em>threading</em>...&nbsp; Various collection types specifically target GPU like <em>gpu-hotspots</em>, <em>gpu-offload</em><br>
                                <br>
                                Use the command line help to find out available collection types:<br>
                                <br>
                                <em>vtune --help collect</em><br>
                                <br>
                                Use the command line to find out the supported knobs of a certain collection type:<br>
                                <br>
                                <em>vtune --help collect hotspots</em><br>
                                &nbsp;</li>
                                <li><strong>Generate HTML Report for Collected VTune Data:</strong><br>
                                <br>
                                <em>vtune -report summary -result-dir vtune_data -format html -report-output $(pwd)/summary.html</em><br>
                                <br>
                                Various types of report can be generated like <em>summary</em>, <em>top-down</em>, <em>callstacks</em>…<br>
                                <br>
                                Use the command line help to find out more:<br>
                                <br>
                                <em>vtune --help report</em><br>
                                &nbsp;</li>
                                <li><strong>Download and View VTune Results</strong>
                                <ul style="list-style-type:circle">
                                    <li>Download the result folder from the server to your local machine</li>
                                    <li>Open VTune from the results folder file using VTune&nbsp; GUI</li>
                                </ul>
                                </li>
                            </ol>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_let_get_it">
                            <p class="mb-0">&nbsp;</p>
                            <h3 style="opacity: 1;"><strong>Let’s Get to It</strong></h2>
                            <p class="mb-0">Now it’s time to apply VTune to a SYCL open industry standard-based heterogeneous application with GPU offload. We will do the following:</p>
                            <ol>
                                <li>Analyze the application on a CPU and understand the nature of the workload.</li>
                                <li>Analyze the application on a GPU and find the bottlenecks.</li>
                                <li>Optimize the application step-by-step based on the reports generated by Intel VTune Profiler.</li>
                            </ol>
                        </section>

                        <section id="dk_example_workflow">
                            <p>&nbsp;</p>
                            <h4 style="opacity: 1;"><strong>Example Workflow: VTune Profiling on CPU and GPU in 7 Steps</strong></h3>
                            <p>We will now build, run, collect data, and display the VTune summary when running on CPU and GPU.</p>
                        </section>

                        <section id="dk_step1_test">
                            <p class="mb-0">&nbsp;</p>
                            <h4><strong>Step 1: Test Application; SYCL Implementation of iso3dfd</strong></h4>
                            <p>The iso3dfd application is a three-dimensional stencil to simulate the wave propagation in a 3D isotropic medium. CPP and SYCL implementation of iso3dfd will be used to collect VTune data and analyze the generated result.</p>
                            <p class="mb-0">The following are the source code files of the iso3dfd application that will be profiled:</p>
                            <ul>
                                <li><a class="b_special_a1" href="" style="color:#0070c0; font-style:normal">1_CPU_only.cpp</a></li>
                                <li><a class="b_special_a1" href="" style="color:#0070c0; font-style:normal">2_GPU_basic.cpp</a></li>
                                <li><a class="b_special_a1" href="" style="color:#0070c0; font-style:normal">3_GPU_linear.cpp</a></li>
                                <li><a class="b_special_a1" href="" style="color:#0070c0; font-style:normal">4_GPU_private_memory_I.cpp</a></li>
                                <li><a class="b_special_a1" href="" style="color:#0070c0; font-style:normal">5_GPU_optimized.cpp</a></li>
                            </ul>
                            <p>The example application will be invoked from the command line as follows:</p>
                            <p><em>./&lt;executable_name&gt; n1 n2 n3 Iterations</em></p>
                            <p>Here,&nbsp; <em>n1 n2 n3</em>: Defines the three-dimensional grid sizes for the stencil</p>
                            <p><em>Iterations</em>: Number of timesteps to compute.&nbsp;</p>
                            <p><em>kernel_iterations:</em> Number of cells, which one kernel iterates over - (only for 5_GPU_optimized binary)</p>
                            <p><em>n2_WGS n3_WGS:</em> Work group size in second and third dimension (only for 5_GPU_optimized binary)</p>
                            <p class="mb-0">&nbsp;</p>
                        </section>

                        <section id="dk_step2_run">
                            <h4 style="opacity: 1;"><strong>Step 2: Run Application on CPU</strong></h4>
                           <p>We start with a simple serialized CPP implementation of iso3dfd. We will run this application on CPU following 3 easy steps.</p>
                           <h5>Command Line for Running the SYCL Implementation on CPU</h5>
                           <p><strong>First</strong>, we will write the commands to a file named <em>run_iso3dfd.sh</em></p>
                            
                           <!-- code toolbar 3 -->
                            <div class="mv_code_toolbar">
                                <div class="mv_toolbar_item mv_copy_icon">
                                    <i class="fa-regular fa-copy"></i>
                                </div>
                                <div class="mv_copy_message text-end hidden">Copied</div>
                                <div class="code-content">
                                    <div style="padding-bottom: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            1
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0"><span class="token function">%%writefile run_iso3dfd.sh</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            2
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0"><span style="color: #008200 !important;">#!/bin/bash</span></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            3
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">source /opt/intel/inteloneapi/setvars.sh <a class="dk_color2" href="">></a> /dev/null 2<a class="dk_color2"href="">>&</a>1</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            4
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">chmod -R 777 guided_iso3dfd_code_sample/build/src/1_CPU_only</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 1rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            5
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">./guided_iso3dfd_code_sample/build/src/1_CPU_only 256 256 256 100</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p>After writing to <em>run_iso3dfd.sh</em> is complete, we will run the script:</p>
                        </section>

                        <section id="dk_tensorflow">
                            <p>&nbsp;</p>
                            <h4 style="font-weight: 350;">TensorFlow Runtime Options Affecting Performance</h4>
                            <p>These runtime options heavily affect TensorFlow performance. Understanding them helps you get the best performance out of Intel optimizations. BKMs differ for MxT and RTI. The runtime options are: <strong>{intra|inter}_op_parallelism_threads</strong> and data layout.</p>
                        </section>

                        <section id="dk_intra_op">
                            <p class="mb-0">&nbsp;</p>
                            <h4>{intra|inter}_op_parallelism_threads</h4>
                            <ul> 
                                <li>Recommended settings (MxT): <strong>intra_op_parallelism = #physical cores</strong></li> 
                                <li>Recommended settings (RTI): <strong>intra_op_parallelism = #physical cores</strong></li> 
                                <li>Recommended settings for <strong>inter_op_parallelism</strong>: <strong>2</strong></li> 
                                <li>Use (shell):<br> <strong>python script.py ––num_intra_threads=cores ––num_inter_threads=2 ––mkl=True</strong></li> 
                            </ul>
                            <p><strong>intra_op_parallelism_threads</strong> and <strong>inter_op_parallelism_threads</strong> are environment variables defined in <strong>tensorflow.ConfigProto</strong>. The <strong>ConfigProto </strong>is used for configuration when creating a session. These two environment variables control number of cores to use.</p>
                            <p>The <strong>intra_op_parallelism_threads</strong> environment variable controls parallelism inside an operation. For instance, if matrix multiplication or reduction is intended to run in several threads, set this environment variable. TensorFlow schedules tasks in a thread pool that contains <strong>intra_op_parallelism_threads</strong>. OpenMP* threads are bound to thread context as closely as possible on different cores. Setting this environment variable to the number of available physical cores is recommended.</p>
                            <p>The <strong>inter_op_parallelism_threads</strong> environment variable controls parallelism among independent operations. Since these operations are not relevant to each other, TensorFlow attempts to run them concurrently in the thread pool that contains <strong>inter_op_parallelism_threads</strong>. To minimize effects that are brought to <strong>intra_op_parallelsim_threads</strong>, this environment variable is recommended to be set to the number of sockets where you want the code to run. For the Intel Optimization of TensorFlow, it's recommended to keep the entire execution on a single socket.</p>
                            <p>&nbsp;</p>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_data_layout">
                            <h4 style="font-weight: 350;">Data Layout</h4>
                            <ul> 
                                <li>Recommended settings: <strong>Data_format = NCHW</strong></li> 
                                <li>Use (shell):</li> 
                            </ul>
                            <!-- code toolbar 3 -->
                            <div class="mv_code_toolbar">
                                <div class="mv_toolbar_item mv_copy_icon">
                                    <i class="fa-regular fa-copy"></i>
                                </div>
                                <div class="mv_copy_message text-end hidden">Copied</div>
                                <div class="code-content">
                                    <div style="padding-bottom: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            1
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0"><span class="token function">python</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            2
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">script.py ––num_intra_threads <a class="dk_color2" href="">=</a> cores ––num_inter_threads <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">2</a> ––mkl <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">True</a></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 1rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            3
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">data_format <a class="dk_color2" href="">=</a> NCHW</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p>&nbsp;</p>
                            <p>In modern Intel architectures, efficient use of cache and memory greatly impacts overall performance. A good memory access pattern minimizes the performance cost of accessing data in memory. To achieve this, it's important to consider how data is stored and accessed. This is usually referred to as <em>data layout</em>. It describes how multidimensional arrays are stored linearly in the memory address space.</p>
                            <p class="mb-0">Usually, data layout is represented by four letters for a two-dimensional image.</p>
                            <ul> 
                                <li>N: Batch size, indicating number of images in a batch</li> 
                                <li>C: Channel, indicating number of channels in an image</li> 
                                <li>W: Width, indicating number of pixels in horizontal dimension of an image</li> 
                                <li>H: Height, indicating number of pixels in vertical dimension of an image</li> 
                            </ul>
                            <p>&nbsp;</p>
                            <p style="text-align:center"><img class="w-100" src="/img/darshit_image/effectively-train-execute-ml-dl-projects-on-cpus-fig04.jpg" width="750"></p>
                            <p style="text-align:center">&nbsp;</p>
                        </section>

                        <section id="dk_that_affect_per">
                            <p>&nbsp;</p>
                            <h3 style="font-weight: 350;">That Affect Performance</h3>
                            <p>The order of these four letters indicates how pixel data is stored in 1D memory space. For instance, NCHW indicates pixel data is stored in this order: width-wise, height-wise, channel-wise, and batch-wise (Figure 4). The data is then accessed from left to right with channels-first indexing. NCHW is the recommended data layout for Intel MKL-DNN because this is an efficient layout for the CPU. TensorFlow uses NHWC as the default data layout, but it also supports NCHW.</p>
                        </section>

                        <section id="dk_numa_controls">
                            <p>&nbsp;</p>
                            <p class="mb-0">&nbsp;</p>
                            <h3 style="font-weight: 350;">NUMA Controls</h3>
                            <ul> 
                                <li>Recommended settings: <strong>––cpunodebind=0 ––membind=0</strong></li> 
                                <li>Usage (shell):</li> 
                            </ul>
                            <!-- code toolbar 3 -->
                            <div class="mv_code_toolbar">
                                <div class="mv_toolbar_item mv_copy_icon">
                                    <i class="fa-regular fa-copy"></i>
                                </div>
                                <div class="mv_copy_message text-end hidden">Copied</div>
                                <div class="code-content">
                                    <div style="padding-bottom: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            1
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0"><span class="token function">numactl ––cpunodebind= <a class="dk_color1" href="">0</a> ––membind= <a class="dk_color1" href="">0</a> python</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            2
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">script.py ––num_intra_threads <a class="dk_color2" href="">=</a> cores ––num_inter_threads <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">2</a> ––mkl <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">True</a> </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 1rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            3
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">data_format <a class="dk_color2" href="">=</a> NCHW</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p class="mb-0">&nbsp;</p>
                            <p>Running on a non-uniform memory access (NUMA) enabled machine brings with it special considerations. NUMA is a memory layout design used in data center machines that take advantage of locality of memory in multisocket machines with multiple memory controllers and blocks. The Intel Optimization for TensorFlow runs best when confining both running and memory use to a single NUMA node.</p>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_intel_mkn">
                            <h3 style="font-weight: 350;">Intel MKL-DNN Technical Performance Considerations</h3>
                            <p>The library takes advantage of single instruction multiple data (SIMD) instructions through vectorization, and multiple cores through multithreading. Vectorization effectively uses cache and the latest instruction sets. On modern Intel® processors, a single core can perform up to two fused multiply and add (FMA) operations on 16 single-precision or 64 Int8 numbers per cycle. Also, the technique of multithreading helps in performing multiple independent operations simultaneously. Since deep-learning tasks are often independent, getting available cores working in parallel is an obvious choice to boost performance.</p>
                            <p>To achieve the best possible CPU use, Intel MKL-DNN may use hardware-specific buffer layouts for compute-intensive operations, including convolution and inner product. All the other operations run on the buffers in hardware-specific layouts or common layouts used by frameworks.</p>
                            <p>Intel MKL-DNN uses OpenMP to express parallelism. OpenMP is controlled by various environment variables: <strong>KMP_AFFINITY</strong>, <strong>KMP_BLOCKTIME</strong>, <strong>OMP_NUM_THREADS</strong>, and <strong>KMP_SETTINGS</strong>. These environment variables are described in the following sections. Changing the values of these environment variables affects performance of the framework, so we highly recommend that users tune them for their specific neural network model and platform.</p>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_kmp_affinity">
                            <h4>KMP_AFFINITY</h4>
                            <ul> 
                                <li>Recommended settings:<br> <strong>KMP_AFFINITY=granularity=fine,verbose,compact,1,0</strong></li> 
                                <li>Usage (shell):</li> 
                            </ul>
                            <!-- code toolbar 3 -->
                            <div class="mv_code_toolbar">
                                <div class="mv_toolbar_item mv_copy_icon">
                                    <i class="fa-regular fa-copy"></i>
                                </div>
                                <div class="mv_copy_message text-end hidden">Copied</div>
                                <div class="code-content">
                                    <div style="padding-bottom: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            1
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0"><span class="token function">numactl ––cpunodebind <a class="dk_color2" href="">=</a>  <a class="dk_color1" href="">0</a> ––membind <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">0</a> python</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            2
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">script.py ––num_intra_ threads<a class="dk_color2" href="">=</a>cores ––num_inter_threads<a class="dk_color2" href="">=</a> <a class="dk_color1" href="">2</a> ––mkl<a class="dk_color2" href="">=</a> <a class="dk_color1" href="">True</a> </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 1rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            3
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">data_format<a class="dk_color2" href="">=</a>NCHW ––kmp_affinity=granularity<a class="dk_color2" href="">=</a>fine,verbose,compact,1,0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p>&nbsp;</p>
                            <p><strong>KMP_AFFINITY </strong>is used to restrict running certain threads to a subset of the physical processing units in a multiprocessor computer. Set this environment variable as follows:</p>
                            <p class="mb-0"><strong>KMP_AFFINITY=[&lt;modifier&gt;,...]&lt;type&gt;[,&lt;permute&gt;][,&lt;offset&gt;]</strong></p>
                            <ul> 
                                <li><strong>Modifier </strong>is a string consisting of a keyword and specifier.</li> 
                                <li><strong>Type </strong>is a string indicating the thread affinity to use.</li> 
                                <li><strong>Permute </strong>is a positive integer value that controls which levels are most significant when sorting the machine topology map. The value forces the mappings to make the specified number of most significant levels of the sort the least significant, and then inverts the order of significance. The root node of the tree is not considered a separate level for the sort operations.</li> 
                                <li>Offset is a positive integer value that indicates the starting position for thread assignment.</li> 
                            </ul>
                            <p>As an example to explain basic content of this environment variable, use the recommended setting of <strong>KMP_AFFINITY</strong>:</p>
                            <p><strong>KMP_AFFINITY=granularity=fine,verbose,compact,1,0</strong></p>
                            <p class="mb-0">The modifier is <strong>granularity=fine,verbose</strong>. The word <strong>fine </strong>causes each OpenMP thread to be bound to a single-thread context, and verbose prints messages concerning the supported affinity, for example:</p>
                            <ul> 
                                <li>The number of packages</li> 
                                <li>The number of cores in each package</li> 
                                <li>The number of thread contexts for each core</li> 
                                <li>OpenMP thread bindings to physical thread contexts</li> 
                            </ul>
                            <p>The word <strong>compact</strong> is the value of type, assigning the OpenMP thread <strong>&lt;n&gt;+1</strong> to a free thread context as close as possible to the thread context where the<strong> &lt;n&gt;</strong> OpenMP thread was placed.</p>
                            <p>Figure 5 shows the machine topology map when <strong>KMP_AFFINITY </strong>is set to these values. The OpenMP thread <strong>&lt;n&gt;+1</strong> is bound to a thread context as closely as possible to the OpenMP thread <strong>&lt;n&gt;</strong>, but on a different core. Once each core has been assigned an OpenMP thread, the subsequent OpenMP threads are assigned to the available cores in the same order, but they are assigned on different thread contexts.</p>
                            <p style="text-align:center"><img class="w-100" src="/img/darshit_image/effectively-train-execute-ml-dl-projects-on-cpus-fig05.jpg" width="750"></p>
                            <p style="text-align:center">Figure 5. Machine topology map with the setting <strong>KMP_AFFINITY=granularity=fine,compact,1,0</strong></p>
                            <p>The advantage of this setting is that consecutive threads are bound close together so that communication overhead, cache line invalidation overhead, and page thrashing are minimized. It's desirable to avoid binding multiple threads to the same core and leaving other cores unused. For more detailed description of <strong>KMP_AFFINITY</strong>, see the <a class="b_special_a1" href="">Intel® C++ Compiler Developer Guide and Reference</a>.</p>
                        </section>
                        <section id="dk_kmp_blocktime">
                            <p>&nbsp;</p>
                            <h4>KMP_BLOCKTIME</h4>
                            <ul> 
                                <li>Recommended settings for CNN: <strong>KMP_BLOCKTIME=0</strong></li> 
                                <li>Recommended settings for non-CNN: <strong>KMP_BLOCKTIME=1 </strong>(user verifies empirically)</li> 
                                <li>Usage (shell):</li> 
                            </ul>
                            <!-- code toolbar 3 -->
                            <div class="mv_code_toolbar">
                                <div class="mv_toolbar_item mv_copy_icon">
                                    <i class="fa-regular fa-copy"></i>
                                </div>
                                <div class="mv_copy_message text-end hidden">Copied</div>
                                <div class="code-content">
                                    <div style="padding-bottom: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            1
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0"><span class="token function">numactl ––cpunodebind <a class="dk_color2" href="">=</a>  <a class="dk_color1" href="">0</a> ––membind <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">0</a> python</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            2
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">script.py ––num_intra_threads=cores ––num_inter_threads= <a class="dk_color1" href="">2</a> ––mkl=<a class="dk_color1" href="">True</a></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 0rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            3
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">data_format<a class="dk_color2" href="">=</a>NCHW ––kmp_affinity<a class="dk_color2" href="">=</a>granularity<a class="dk_color2" href="">=</a>fine,verbose,compact,<a class="dk_color1" href="">1</a>,<a class="dk_color1" href="">0</a></p>
                                            </div>
                                        </div>
                                    </div>
                                    <div style="padding-top: 0rem !important; padding-bottom: 1rem !important;" class="d-flex mv_pre pb-0">
                                        <div style="border-right: 1px solid #ccc" class="pe-3">
                                            4
                                        </div>
                                        <div class="">
                                            <div class="mv_code text-break">
                                                <p class="mb-0">––kmp_blocktime <a class="dk_color2" href="">=</a> <a class="dk_color1" href="">0</a>( <a class="dk_color1" href="">or</a> <a class="dk_color1" href="">1</a>)</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p>&nbsp;</p>
                            <p>This environment variable sets the time, in milliseconds, that a thread waits after completing running a parallel region before going to sleep. The default value is 200 ms.</p>
                            <p>After completing running a parallel region, threads wait for new parallel work to become available. After a certain period of time has elapsed, they become inactive. Sleeping allows the threads to be used until more parallel work becomes available, by threaded code that isn't OpenMP and may run between parallel regions, or by other applications. A small <strong>KMP_BLOCKTIME </strong>value may offer better overall performance if the application contains threaded code that isn't OpenMP that runs between parallel regions. A larger <strong>KMP_BLOCKTIME </strong>value may be more appropriate if threads are to be reserved solely for running OpenMP, but may penalize other concurrently-running OpenMP or threaded applications. The suggested setting is <strong>0</strong> for CNN-based models.</p>
                        </section>

                        <section id="dk_omp_num">
                            <p>&nbsp;</p>
                            <h4>OMP_NUM_THREADS</h4>
                            <ul> 
                                <li>Recommended settings for CNN: <strong>OMP_NUM_THREADS = # </strong>physical cores</li> 
                                <li>Usage (shell): Export <strong>OMP_NUM_THREADS= #</strong> physical cores</li> 
                            </ul>
                            <p>This environment variable sets the maximum number of threads to use in OpenMP parallel regions if no other value is specified in the application. The value can be a single integer, in which case each integer specifies the number of threads for a parallel region at each nesting level. The first position in the list represents the outermost parallel nesting level. The default value is the number of logical processors visible to the operating system on which the program is executed. The recommended value equals the number of physical cores.</p>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_kmp_settings">
                            <h4>KMP_SETTINGS</h4>
                            <ul> 
                                <li>Use (shell):<strong> Export KMP_SETTINGS=TRUE</strong></li> 
                            </ul>
                            <p>This environment variable enables (TRUE) or disables (FALSE) the printing of OpenMP runtime library environment settings when the program runs.</p>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_learn_more">
                            <h3 style="font-weight: 350;">Learn More</h3>
                            <p>Start using Intel-optimized frameworks to accelerate your deep-learning workloads on the CPU today. Access resources on <a class="b_special_a1" href="">www.intel.ai</a> and get support from the <a class="b_special_a1" href="">Intel® AI Developer Forum</a>. Also, visit the <a class="b_special_a1" href="">AI Model Zoo</a> for solution-oriented resources for your accelerated TensorFlow projects. These resources help you use CPU resources to their fullest capability.</p>
                            <p>&nbsp;</p>
                        </section>

                        <section id="dk_references">
                            <h3 style="font-weight: 350;">References</h3>
                            <p><sup>1</sup> Inference using FP32 batch size Caffe for GoogleNet* v1 128, AlexNet v 256.</p>
                            <p>Configurations for inference throughput: Tested by Intel as of 6/7/2018. Platform: two-socket Intel® Xeon® Platinum processor, 8180 CPU at 2.50 GHz and 28 cores, HyperThreading ON, turbo ON. Total Memory: 376.28 GB (12 slots, 32 GB, 2666 MHz), four instances of the framework, CentOS* Linux*: 7.3.1611 core, SSD, sda RS3WC080, HDD 744.1 GB, sdb RS3WC080, HDD 1.5 TB, sdc RS3WC080, HDD 5.5 TB, deep-learning framework Caffe version: a3d5b022fe026e9092fc7abc7654b1162ab9940d. Topology: GoogleNet v1, BIOS: SE5C620.86B.00.01.0004.071220170215, Intel MKL DNN version: 464c268e544bae26f9b85a2acb9122c766a4c396, NoDataLayer. Measured: 1449 images per second vs. tested by Intel as of 06/15/2018. Platform: 2S Intel® Xeon® E5-2699 processor v3 at 2.30 GHz (18 cores), HyperThreading enabled, turbo disabled, scaling governor set to “performance” via the <strong>intel_pstate </strong>driver, 64 GB DDR4-2133 ECC RAM. BIOS: SE5C610.86B.01.01.0024.021320181901, CentOS Linux 7.5.1804 (core) kernel 3.10.0-862.3.2.el7.x86_64, SSD sdb INTEL SSDSC2BW24 SSD 223.6GB. Framework BVLC Caffe: <a class="b_special_a1" href="">GitHub*</a>, Inference and training measured with <strong>caffe time</strong> command. For <strong>ConvNet</strong> topologies, a dummy dataset was used. For other topologies, data was stored on local storage and cached in memory before training. <a class="b_special_a1" href="">BVLC Caffe</a>, revision 2a1c552b66f026c7508d390b526f2495ed3be594.</p>
                            <p>Configuration for training throughput: Tested by Intel as of 05/29/2018 Platform: two-socket Intel Xeon Platinum 8180 processor at 2.50 GHz, 28 cores, HyperThreading ON, turbo ON, total memory 376.28 GB (12 slots, 32 GB, 2666 MHz), four instances of the framework, CentOS Linux 7.3.1611 core, SSD, sda RS3WC080, HDD 744.1 GB, sdb RS3WC080, HDD 1.5TB, sdc RS3WC080, HDD 5.5TB, deep learning framework Caffe version: a3d5b022fe026e9092fc7abc765b1162ab9940d Topology: AlexNet BIOS: SE5C620.86B.00.01.0004.071220170215, Intel MKL DNN version: 464c268e544bae26f9b85a2acb9122c766a4c396 <strong>NoDataLayer</strong>. Measured: 1257 imgages per sec vs. tested by Intel as of 06/15/2018. Platform: 2S Intel Xeon E5-2699 processor v3 at 2.30 GHz (18 cores), HyperThreading enabled, turbo disabled, scaling governor set to <strong>performance</strong> via the <strong>intel_pstate</strong> driver, 64 GB, DDR4-2133 ECC RAM. BIOS: SE5C610.86B.01.01.0024.021320181901, CentOS Linux 7.5.1804 (core) kernel 3.10.0-862.3.2.el7.x86_64, SSD, sdb INTEL SSDSC2BW24, SSD 223.6 GB. Framework: <a class="b_special_a1" href="">BVLC Caffe</a>. Inference and training measured with <strong>caffe time</strong> command. For <strong>ConvNet</strong> topologies, dummy dataset was used. For other topologies, data was stored on local storage and cached in memory before training. <a class="b_special_a1" href="">BVLC Caffe</a>, revision 2a1c552b66f026c7508d390b526f2495ed3be594</p>
                            <p><sup>2</sup> System configuration: CPU threads per core: two cores per socket: 28 sockets, two NUMA nodes, two CPU family: 6 model, 85 model name: Intel Xeon Platinum 8180 processor at 2.50 GHz, HyperThreading: ON turbo: ON, memory 376 GB (12x32 GB), 24 slots, 12 occupied, 2666 MHz disks Intel RS3WC080 x 3 (800 GB, 1.6 TB, 6 TB) BIOS: SE5C620.86B.00.01.0004. 070920180847 (microcode version 0x200004d), Centos Linux 7.4.1708 (core) kernel 3.10.0-693.11.6.el7.x86_64, <a class="b_special_a1" href="">TensorFlow Source</a>, commit: 6a0b536a779f485edc25f6a11335b5e640acc8ab, Intel MKL DNN version: 4e333787e0d66a1dca1218e99a891d493dbc8ef1, <a class="b_special_a1" href="">TensorFlow benchmarks </a></p>
                            <h2 style="opacity: 0.5;">______<a class="inpage-nav-anchor" id="inpage-nav-12"></a></h2>
                        </section>

                        <section id="dk_you_may">
                            <p>&nbsp;</p>
                            <h3 style="font-weight: 350;">You May Also Like</h3>
                            <div class="mv_deploy_nav_tab">
                                <ul class="nav nav-pills mv_deploy_nav_pills pt-3" id="pills-tab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active mv_deploy_nav_link" id="pills-home-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home"
                                                aria-selected="true">Related Webinars</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link mv_deploy_nav_link" id="pills-profile-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile"
                                                aria-selected="false">Related Articles</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link mv_deploy_nav_link" id="pills-video-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-video" type="button" role="tab" aria-controls="pills-video"
                                                aria-selected="false">Related Video</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link mv_deploy_nav_link" id="pills-design-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-design" type="button" role="tab" aria-controls="pills-design"
                                                aria-selected="false">Related Podcast</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link mv_deploy_nav_link" id="pills-simulation-tab" data-bs-toggle="pill"
                                                data-bs-target="#pills-simulation" type="button" role="tab" aria-controls="pills-simulation"
                                                aria-selected="false">Get the Software</button>
                                        </li>
                                </ul>
                                <div class="tab-content" id="pills-tabContent">
                                        <!-- 1. Device Information -->
                                        <div class="tab-pane fade show active" id="pills-home" role="tabpanel"
                                            aria-labelledby="pills-home-tab" tabindex="0">
                                            <div class="mv_coman_padd" style=" border-bottom: 1px solid #ddd; display: flex; padding-bottom: 1rem;">
                                                <div class="">
                                                    <p>Enhance Deep-Learning Workloads on 3rd Generation Intel® Xeon® Scalable Processors</p>
                                                    <a class="b_special_a1" href="">Watch</a>
                                                </div>
                                                <div class="">
                                                    <p>Advanced Code Optimization for 3rd Generation Intel Xeon Scalable Processors</p>
                                                    <a class="b_special_a1" href="">Watch</a>
                                                </div>
                                            </div>
                                            <!-- User Guides -->
                                            
                                        </div>
                                        <!-- 2. Interface Protocol -->
                                        <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab"
                                            tabindex="0">
                                            <div class="mv_coman_padd" style=" border-bottom: 1px solid #ddd; display: flex; padding-bottom: 1rem;">
                                                <div class="">
                                                    <p>Use Deep Learning Optimizations from Intel in TensorFlow*</p>
                                                    <a class="b_special_a1" href="">Read</a>
                                                </div>
                                                <div class="">
                                                    <p>One-Line Code Changes to Boost pandas, scikit-learn*, and TensorFlow Performance </p>
                                                    <a class="b_special_a1" href="">Read</a>
                                                </div>
                                            </div>
                                            <!-- User Guides -->
                                        </div>
                                        <!-- 3. Design Planning -->
                                        <div class="tab-pane fade" id="pills-video" role="tabpanel" aria-labelledby="pills-video-tab"
                                            tabindex="0">
                                            <div class="mv_coman_padd" style="padding-bottom: 1rem;">
                                                <p>Optimize End-to-End Data Science and Machine Learning Acceleration</p>
                                                <a class="b_special_a1" href="">Watch</a>
                                            </div>
                                            <!-- User Guides / Device Overview / Device Datasheet / Application Notes-->
                                        </div>
                                        <!-- 4. Design Entry -->
                                        <div class="tab-pane fade" id="pills-design" role="tabpanel" aria-labelledby="pills-design-tab"
                                            tabindex="0">
                                            <div class="mv_coman_padd" style="padding-bottom: 1rem;">
                                                <p>Ignite the Next Generation of Deep Learning </p>
                                                <a class="b_special_a1" href="">Listen</a>
                                            </div>
                                            <!-- User Guides / Device Overview / Device Datasheet / White Paper -->
                                            
                                        </div>
                                        <!-- 5. Simulation and Verification -->
                                        <div class="tab-pane fade" id="pills-simulation" role="tabpanel" aria-labelledby="pills-simulation-tab"
                                            tabindex="0">
                                            <div class="mv_coman_padd" style="padding-bottom: 1rem;">
                                                <a class="b_special_a1" href=""><b>Intel® oneAPI Math Kernel Library</b></a>
                                                <p>Accelerate math processing routines, including matrix algebra, fast Fourier transforms (FFT), and vector math. Part of the Intel® oneAPI Base Toolkit.</p>
                                                <p><a class="mv_coman_btn" href="">Get It Now</a></p>
                                                <p><a class="b_special_a1" href="">See All Tools</a></p>
                                            </div>
                                            <!-- User Guides / Device Overview / Device Datasheet / Application Notes -->
                                        </div>
                                </div>
                            </div>
                        </section>
                </div>
            </div>
        </div>
    </section>

    <section style="border-top: 1px solid #d7d7d7;" class="container py-5">
        <h4 class="h6">Product and Performance Information</h4>
        <div class="disclaimer" style="font-size: 12px;"><sup>1</sup> Performance varies by use, configuration and other
            factors. Learn more at <a class="b_special_a1" href="">www.Intel.com/PerformanceIndex.</a></div>
        </div>
    </section>

    <!-- footer -->
    <div id="footer"></div>

    <!-- nav script -->
    <script>
        // navbar include  
        fetch('/y_index/y_navbar.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar').innerHTML = data;
            });
        // footer include 
        fetch('/y_index/y_footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });
    </script>
    <!-- nav script -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (document.getElementsByClassName('VK_all_sections section') && document.getElementsByClassName('VK_sidebar_dropdown')) {
                const sections = document.querySelectorAll('.VK_all_sections section');
                const navLinks = document.querySelectorAll('.VK_sidebar_dropdown a');
                const detailsElements = document.querySelectorAll('.VK_sidebar_dropdown details');

                function removeActiveClass() {
                    navLinks.forEach(link => link.classList.remove('VK_sidebar_active_link'));
                    detailsElements.forEach(details => {
                        details.removeAttribute('open');
                        details.setAttribute('close', ''); // Optional: to visually indicate it's closed
                    });
                }

                function activateLinkAndDetails(targetId) {
                    navLinks.forEach(link => {
                        if (link.getAttribute('href') === `#${targetId}`) {
                            link.classList.add('VK_sidebar_active_link');
                            let parentDetails = link.closest('details');

                            // Open all ancestor details elements
                            while (parentDetails) {
                                parentDetails.setAttribute('open', '');
                                parentDetails.removeAttribute('close'); // Optional: remove the closed indicator
                                parentDetails = parentDetails.parentElement.closest('details');
                            }
                        }
                    });
                }

                function onScroll() {
                    let currentSection = '';
                    sections.forEach(section => {
                        const sectionTop = section.getBoundingClientRect().top;
                        const sectionBottom = section.getBoundingClientRect().bottom;

                        // Check if the section is in view
                        if (sectionTop <= 100 && sectionBottom >= 0) {
                            currentSection = section.getAttribute('id');
                        }
                    });

                    if (currentSection) {
                        removeActiveClass();
                        activateLinkAndDetails(currentSection);
                    } else {
                        removeActiveClass();
                    }
                }

                window.addEventListener('scroll', onScroll);
            } else {
                return
            }
        });
    </script>

    <!-- copy script -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            document.querySelectorAll(".mv_copy_icon").forEach((icon) => {
                icon.addEventListener("click", async function () {
                    try {
                        const toolbar = this.closest(".mv_code_toolbar");
                        const codeBlock = toolbar.querySelector(".code-content");
                        const codeContent = codeBlock.innerText;

                        // Use Clipboard API to copy text
                        await navigator.clipboard.writeText(codeContent);

                        // Hide the copy icon and show the "Copied!" message
                        const message = toolbar.querySelector(".mv_copy_message");
                        this.classList.add("hidden"); // Hide the copy icon
                        message.classList.remove("hidden"); // Show the "Copied!" message

                        // Hide the message and show the icon again after 2 seconds
                        setTimeout(() => {
                            message.classList.add("hidden");
                            this.classList.remove("hidden");
                        }, 2000); // Adjust delay as needed

                    } catch (err) {
                        console.error('Failed to copy text: ', err);
                    }
                });
            });
        });
    </script>

</body>

</html>


